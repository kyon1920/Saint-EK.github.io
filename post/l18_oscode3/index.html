<!DOCTYPE html>
<html lang="zh-cn" >
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  
  <meta name="author"
        content="Bruce Cheung"/>

  
  <meta name="description" content=""/>
  

  
  
  <meta name="keywords" content="blog, simple, dream"/>
  

  
  <link rel="canonical" href="https://oubc.github.io/post/l18_oscode3/"/>

  

  <title>Linuxç³»ç»Ÿç¼–ç¨‹ (ä¿¡å·-æ—¶åºç«æ€) &middot; Love, or death</title>

  <link rel="shortcut icon" href="https://oubc.github.io/images/favicon.ico"/>
  <link rel="stylesheet" href="https://oubc.github.io/css/animate.min.css"/>
  <link rel="stylesheet" href="https://oubc.github.io/css/remixicon.css"/>
  <link rel="stylesheet" href="https://oubc.github.io/css/zozo.css"/>
  <link rel="stylesheet" href="https://oubc.github.io/css/highlight.css"/>

  
  
</head>

<body>
<div class="main animated">
  <div class="nav_container animated fadeInDown">
  <div class="site_nav" id="site_nav">
    <ul>
      
      <li>
        <a href="/">é¦–é¡µ</a>
      </li>
      
      <li>
        <a href="/post/">å½’æ¡£</a>
      </li>
      
      <li>
        <a href="/tags/">æ ‡ç­¾</a>
      </li>
      
      <li>
        <a href="/about/">å…³äº</a>
      </li>
      
    </ul>
  </div>
  <div class="menu_icon">
    <a id="menu_icon"><i class="remixicon-links-line"></i></a>
  </div>
</div>

  <div class="header animated fadeInDown">
  <div class="site_title_container">
    <div class="site_title">
      <h1>
        <a href="https://oubc.github.io/">
          <span>Love, or death</span>
          <img src="https://oubc.github.io/images/logo.svg"/>
        </a>
      </h1>
    </div>
    <div class="description">
      <p class="sub_title">For you, a thousand times over.</p>
      <div class="my_socials">
        
        
        <a href="https://github.com/oubc" title="github" target="_blank"><i class="remixicon-github-fill"></i></a>
        
        
        
        <a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=uYGOjo6OiIuLivnIyJfa1tQ" title="mail" target="_blank"><i class="remixicon-mail-fill"></i></a>
        
        
        
        <a href="http://sighttp.qq.com/msgrd?v=1&amp;uin=877771223" title="qq" target="_blank"><i class="remixicon-qq-fill"></i></a>
        
        
        
        <a href="https://github.com/oubc/oubc.github.io/blob/master/images/wx.jpg?raw=true" title="wechat" target="_blank"><i class="remixicon-wechat-fill"></i></a>
        
        
        
        <a href="https://weibo.com/u/6993631995?topnav=1&amp;wvr=6&amp;topsug=1" title="weibo" target="_blank"><i class="remixicon-weibo-fill"></i></a>
        
        
        <a href="https://oubc.github.io/index.xml" type="application/rss+xml" title="rss" target="_blank"><i class="remixicon-rss-fill"></i></a>
      </div>
    </div>
  </div>
</div>

  <div class="content">
    <div class="post_page">
      <div class="post animated fadeInDown">
        <div class="post_title post_detail_title">
          <h2><a href='/post/l18_oscode3/'>Linuxç³»ç»Ÿç¼–ç¨‹ (ä¿¡å·-æ—¶åºç«æ€)</a></h2>
          <span class="date">2019.09.29</span>
        </div>
        <div class="post_content markdown"><p><br>
<br>
<font color = gray size = 2>åˆ—è¡¨ï¼Œå±•å¼€ç‚¹å‡»è·³è½¬</font>
<br>
<details class="menu" close>
      <summary><font color=blue size = 4>ç«æ€æ¡ä»¶</font></summary>
      <ul>
          <li><a href="#bc0">ç«æ€æ¡ä»¶</a></li>
          <li><a href="#bc1">pause() å‡½æ•°</a></li>
          <li><a href="#bc2">æ—¶åºç«æ€</a></li>
          <li><a href="#bc3">ç«æ€æ¡ä»¶æ€»ç»“</a></li>
          <li><a href="#bc4">å…¨å±€å˜é‡å¼‚æ­¥I/O</a></li>
          <li><a href="#bc5">å¯/ä¸å¯é‡å…¥å‡½æ•°</a></li>
      </ul>
</details>
<details class="menu" close>
      <summary><font color=blue size = 4>SIGCHLDä¿¡å·</font></summary>
      <ul>
          <li><a href="#bc6">SIGCHLDä¿¡å·çš„äº§ç”Ÿæ¡ä»¶</a></li>
          <li><a href="#bc7">å€ŸåŠ©SIGCHLDä¿¡å·å›æ”¶å­è¿›ç¨‹</a></li>
      </ul>
</details>
<details class="menu" close>
      <summary><font color=blue size = 4>ä¿¡å·ä¼ å‚</font></summary>
      <ul>
          <li><a href="#bc8">å‘é€ä¿¡å·ä¼ å‚</a></li>
          <li><a href="#bc9">æ•æ‰ä¿¡å·ä¼ å‚</a></li>
      </ul>
</details>
<details class="menu" close>
      <summary><font color=blue size = 4>ä¸­æ–­ç³»ç»Ÿè°ƒç”¨</font></summary>
      <ul>
          <li><a href="#bc10">ä¸­æ–­ç³»ç»Ÿè°ƒç”¨</a></li>
      </ul>
</details>
<br>
<br>
<br>
<br>
<br><font color=black size = 5><a name="bc0">ç«æ€æ¡ä»¶</a></font>
<br> â™ å½“å‰çš„åº”ç”¨ç¨‹åºæˆ–è€…å½“å‰çš„è¿›ç¨‹åœ¨æ‰§è¡ŒæœŸé—´ç”±äºç«äº‰çš„åŸå› å¯¼è‡´ç¨‹åºæ‰§è¡Œçš„æ—¶åºåœ¨å…ˆåä¸¤æ¬¡æ‰§è¡Œè¿‡ç¨‹å½“ä¸­å‘é€å˜åŒ–
<br> â™ åœ¨åº”ç”¨ç¨‹åºæˆ–è€…è¿›ç¨‹è¿è¡Œè¿‡ç¨‹å½“ä¸­æœ‰ç«äº‰ï¼Œç«äº‰åœ¨è¿è¡Œè¿‡ç¨‹ä¸­æ²¡æœ‰è¢«æ³¨æ„åˆ°ï¼Œå¯¼è‡´ä¸¤æ¬¡è¿è¡Œçš„ç»“æœä¸ä¸€æ ·
<br>
<br><font color=black size = 5><a name="bc1">pause() å‡½æ•°</a></font>
<br> â— è°ƒç”¨è¯¥å‡½æ•°å¯ä»¥é€ æˆè¿›ç¨‹ä¸»åŠ¨æŒ‚èµ·ï¼Œç­‰å¾…ä¿¡å·å”¤é†’ï¼Œè°ƒç”¨è¯¥ç³»ç»Ÿè°ƒç”¨çš„è¿›ç¨‹å°†å¤„äºé˜»å¡çŠ¶æ€(ä¸»åŠ¨æ”¾å¼ƒcpu)ç›´åˆ°æœ‰ä¿¡å·é€’è¾¾å°†å…¶å”¤é†’
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int pause(void);   åªæœ‰ä¿¡å·è¢«æ•æ‰ï¼Œä¿¡å·çš„æ•æ‰å‡½æ•°è¿”å›çš„æ—¶å€™æ‰æœ‰è¿”å›å€¼ä¸º-1ï¼Œè®¾ç½®errnoä¸ºEINTR
<br>è¿”å›å€¼ï¼š
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0ã€å¦‚æœä¿¡å·çš„é»˜è®¤å¤„ç†åŠ¨ä½œæ˜¯ç»ˆæ­¢è¿›ç¨‹ï¼Œåˆ™è¿›ç¨‹ç»ˆæ­¢ï¼Œpauseå‡½æ•°æ²¡æœ‰æœºä¼šè¿”å›
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1ã€å¦‚æœä¿¡å·çš„é»˜è®¤å¤„ç†åŠ¨ä½œæ˜¯å¿½ç•¥ï¼Œè¿›ç¨‹ç»§ç»­å¤„äºæŒ‚èµ·çŠ¶æ€ï¼Œpauseå‡½æ•°ä¸è¿”å›
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2ã€å¦‚æœä¿¡å·å¤„ç†åŠ¨ä½œæ˜¯æ•æ‰ï¼Œåˆ™è°ƒç”¨å®Œä¿¡å·å¤„ç†å‡½æ•°ä¹‹åï¼Œpauseè¿”å›-1ï¼Œerrnoè®¾ç½®ä¸ºEINTRï¼Œè¡¨ç¤ºâ€œä¿¡å·è¢«ä¸­æ–­â€
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3ã€pauseæ”¶åˆ°çš„ä¿¡å·ä¸èƒ½è¢«å±è”½ï¼Œå¦‚æœè¢«å±è”½ï¼Œé‚£ä¹ˆpauseå°±ä¸èƒ½è¢«å”¤é†’
<br> ğŸ˜„ æ€è€ƒï¼šæƒ³æƒ³è¿˜æœ‰å“ªä¸ªå‡½æ•°åªæœ‰å‡ºé”™è¿”å›å€¼
<br> ğŸ˜„ ç¼–ç¨‹å®æˆ˜ï¼šä½¿ç”¨pauseå’Œalarmæ¥å®ç°sleepå‡½æ•°
<br> ğŸ˜„ æ³¨æ„ï¼šunslept = alarm(0)çš„ç”¨æ³•
<br> â— ä¾‹å¦‚ï¼šalarm(10)
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; æ­£å¸¸ï¼Œ10såé—¹é’Ÿä¼šè¢«å”¤é†’ï¼Œè¿™æ˜¯é¢å¤–è®¾ç½®alarm(0)å–æ¶ˆé—¹é’Ÿï¼Œä¸ä¼šå‡ºé”™
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å¼‚å¸¸ï¼Œ5såè¢«å…¶å®ƒä¿¡å·å”¤é†’ï¼Œalarm(0)å–æ¶ˆé—¹é’Ÿé˜²æ­¢æ‰“æ‰°
<br><div style="width:100%;border:1px #e3e3e3 solid;"><div style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;border-bottom:1px solid #e3e3e3;margin-top:5px;color:#000000;">&nbsp;C++ Code&nbsp;</div><table style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;vertical-align:text-top;line-height:15px;" border="0" cellspacing="0" cellpadding="0"><tr><td style="color:#008284;background-color:#e3e3e3;vertical-align:text-top;"><div style="margin:7px;text-align:right;white-space:nowrap;"><nobr>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br></nobr></div></td><td style="background-color:#008284;padding:1px;"><div style="border:1px #008284 solid;"></div></td><td style="background-color:#efefef;width:100%;vertical-align:text-top;color:#000000;"><div style="margin:7px;"><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;iostream&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;unistd.h&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;stdlib.h&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;signal.h&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;errno.h&gt;<BR>
</span><span style="color:#0000ff;">using</span><span style="color:#000000;">&nbsp;</span><span style="color:#0000ff;">namespace</span><span style="color:#000000;">&nbsp;std;<BR>
</span><span style="color:#8000ff;">void</span><span style="color:#000000;">&nbsp;catch_sigalarm(</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;signo)<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;<BR>
}<BR>
</span><span style="color:#8000ff;">unsigned</span><span style="color:#000000;">&nbsp;</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;mysleep(</span><span style="color:#8000ff;">unsigned</span><span style="color:#000000;">&nbsp;</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;seconds)<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">struct</span><span style="color:#000000;">&nbsp;sigaction&nbsp;act,&nbsp;oldact;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;act.sa_handler&nbsp;=&nbsp;catch_sigalarm;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;act.sa_flags&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sigemptyset(&amp;act.sa_mask);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;ret&nbsp;=&nbsp;sigaction(SIGALRM,&nbsp;&amp;act,&nbsp;&amp;oldact);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">(-</span><span style="color:#ff0000;">1</span><span style="color:#000000;">&nbsp;==&nbsp;ret)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;sigaction&nbsp;error!&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color:#ff0000;">1</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alarm(seconds);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;rets&nbsp;=&nbsp;pause();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;ä¸»åŠ¨æŒ‚èµ·ï¼Œç­‰å¾…ä¿¡å·<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(rets&nbsp;==&nbsp;-</span><span style="color:#ff0000;">1</span><span style="color:#000000;">&nbsp;&amp;&amp;&nbsp;errno&nbsp;==&nbsp;EINTR)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;pause&nbsp;success!&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;sec&nbsp;=&nbsp;alarm(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sigaction(SIGALRM,&nbsp;&amp;oldact,&nbsp;</span><span style="color:#0000ff;">NULL</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;æ¢å¤SIGALRMä¿¡å·æ—§æœ‰çš„å¤„ç†æ–¹å¼<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;sec;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;&nbsp;è¿”å›æ²¡æœ‰ç¡çœ å®Œæˆçš„æ—¶é—´<BR>
</span><span style="color:#000000;">}<BR>
</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;main()<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">while</span><span style="color:#000000;">(</span><span style="color:#ff0000;">1</span><span style="color:#000000;">)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mysleep(</span><span style="color:#ff0000;">3</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;......&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
}</span></div></td></tr></table></div>
<br>
<br><font color=black size = 5><a name="bc2">æ—¶åºç«æ€</a></font>
<br>å‰å¯¼ä¾‹
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; æ¬²ç¡è§‰ï¼Œå®šé—¹é’Ÿ10åˆ†é’Ÿï¼Œå¸Œæœ›10åˆ†é’Ÿåé—¹é’Ÿå°†è‡ªå·±å”¤é†’
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; æ­£å¸¸ï¼Œå®šæ—¶ï¼Œç¡è§‰ï¼Œ10åˆ†é’Ÿåè¢«é—¹é’Ÿå”¤é†’
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å¼‚å¸¸ï¼Œé—¹é’Ÿå®šå¥½åï¼Œè¢«å”¤èµ°ï¼Œå¤–å‡ºåŠ³åŠ¨ï¼Œ20åˆ†é’ŸååŠ³åŠ¨ç»“æŸï¼Œå›æ¥ç»§ç»­ç¡è§‰è®¡åˆ’ï¼Œä½†åŠ³åŠ¨æœŸé—´é—¹é’Ÿå·²ç»å“è¿‡ï¼Œä¸åœ¨å°†æˆ‘å”¤é†’
<br> ğŸ˜„ æ—¶åºé—®é¢˜åˆ†æ
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ä¸è®ºåœ¨å“ªä¸ªä½ç½®ï¼Œç¨‹åºéƒ½ä¼šæœ‰å¯èƒ½å¤±å»cpuï¼Œæ‰€ä»¥å”¯ä¸€è§£å†³æ–¹æ³•å°±æ˜¯åœ¨alarm()ä¹‹å‰å°†ä¿¡å·å±è”½ï¼Œç„¶åpause() å‡½æ•°å’Œè§£é™¤å±è”½ç»‘å®šåœ¨ä¸€èµ·ï¼Œè¿™æ ·å°±ä¸ç”¨åœ¨alarm()å’Œpause()ä¹‹é—´å¤±å»cpuè€Œå¯¼è‡´æ— æ³•æ¥æ”¶åˆ°SIGALRMä¿¡å·äº†
<br> ğŸ˜„ è§£å†³æ—¶åºé—®é¢˜
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å¯ä»¥é€šè¿‡è®¾ç½®å±è”½SIGALRMçš„æ–¹æ³•æ¥æ§åˆ¶ç¨‹åºæ‰§è¡Œé€»è¾‘ï¼Œä½†æ— è®ºå¦‚ä½•è®¾ç½®ï¼Œç¨‹åºéƒ½æœ‰å¯èƒ½åœ¨â€œè§£é™¤ä¿¡å·å±è”½â€ä¸â€œæŒ‚èµ·ç­‰å¾…ä¿¡å·â€ä¹‹é—´å¤±å»cpuï¼Œé™¤éå°†è¿™ä¸¤æ­¥éª¤åˆå¹¶æˆä¸ºä¸€ä¸ªâ€œåŸå­æ“ä½œâ€ï¼Œsigsuspend()å‡½æ•°å…·å¤‡è¿™ä¸ªåŠŸèƒ½ï¼Œåœ¨å¯¹æ—¶åºè¦æ±‚ä¸¥æ ¼çš„åœºåˆä¸‹éƒ½åº”è¯¥ä½¿ç”¨sigsuspend()å‡½æ•°æ›¿æ¢pause()å‡½æ•°
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; â— int sigsuspend(const sigset_t *mask);  æŒ‚èµ·ç­‰å¾…ä¿¡å·
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; â— sigsuspend() å‡½æ•°è°ƒç”¨æœŸé—´ï¼Œè¿›ç¨‹ä¿¡å·å±è”½å­—ç”±å‚æ•°maskæŒ‡å®š
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å¯å°†æŸä¸ªä¿¡å·(å¦‚ï¼šSIGALRM)ä»ä¸´æ—¶ä¿¡å·å±è”½å­—maskä¸­åˆ é™¤ï¼Œè¿™æ ·åœ¨è°ƒç”¨sigsuspendæ—¶å°†è§£é™¤å¯¹è¯¥ä¿¡å·çš„å±è”½ï¼Œç„¶åæŒ‚èµ·ç­‰å¾…ï¼Œå½“sigsuspendè¿”å›æ—¶ï¼Œè¿›ç¨‹çš„ä¿¡å·å±è”½å­—æ¢å¤ä¸ºåŸæ¥çš„å€¼ï¼Œå¦‚æœåŸæ¥å¯¹è¯¥ä¿¡å·æ˜¯å±è”½æ€ï¼Œsigsuspendå‡½æ•°è¿”å›åä»å±è”½è¯¥ä¿¡å·
<br> ğŸ˜„ ç¼–ç¨‹å®æˆ˜ï¼šæ”¹è¿›mysleepç¨‹åº
<br><div style="width:100%;border:1px #e3e3e3 solid;"><div style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;border-bottom:1px solid #e3e3e3;margin-top:5px;color:#000000;">&nbsp;C++ Code&nbsp;</div><table style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;vertical-align:text-top;line-height:15px;" border="0" cellspacing="0" cellpadding="0"><tr><td style="color:#008284;background-color:#e3e3e3;vertical-align:text-top;"><div style="margin:7px;text-align:right;white-space:nowrap;"><nobr>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br></nobr></div></td><td style="background-color:#008284;padding:1px;"><div style="border:1px #008284 solid;"></div></td><td style="background-color:#efefef;width:100%;vertical-align:text-top;color:#000000;"><div style="margin:7px;"><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;iostream&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;stdlib.h&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;signal.h&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;unistd.h&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;errno.h&gt;<BR>
</span><span style="color:#0000ff;">using</span><span style="color:#000000;">&nbsp;</span><span style="color:#0000ff;">namespace</span><span style="color:#000000;">&nbsp;std;<BR>
</span><span style="color:#8000ff;">void</span><span style="color:#000000;">&nbsp;myfun(</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;signo)<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;<BR>
}<BR>
</span><span style="color:#8000ff;">unsigned</span><span style="color:#000000;">&nbsp;</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;mysleep(</span><span style="color:#8000ff;">unsigned</span><span style="color:#000000;">&nbsp;</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;seconds)<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">struct</span><span style="color:#000000;">&nbsp;sigaction&nbsp;act,&nbsp;oldact;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;act.sa_handler&nbsp;=&nbsp;myfun;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;act.sa_flags&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sigemptyset(&amp;act.sa_mask);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sigaddset(&amp;act.sa_mask,&nbsp;SIGINT);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;ret&nbsp;=&nbsp;sigaction(SIGALRM,&nbsp;&amp;act,&nbsp;&amp;oldact);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(-</span><span style="color:#ff0000;">1</span><span style="color:#000000;">&nbsp;==&nbsp;ret)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cerr&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;sigaction&nbsp;error!&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color:#ff0000;">1</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">/*&nbsp;sigset_t&nbsp;set,&nbsp;oldset;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sigemptyset(&amp;set);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sigaddset(&amp;set,&nbsp;SIGALRM);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;sigprocmask(SIG_UNBLOCK,&nbsp;&amp;set,&nbsp;&amp;oldset);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(ret&nbsp;==&nbsp;-1)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cerr&nbsp;&lt;&lt;&nbsp;&quot;sigprocmask&nbsp;error!&quot;&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit(1);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}*/</span><span style="color:#000000;"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sigset_t&nbsp;mask;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sigemptyset(&amp;mask);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alarm(seconds);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;sigsuspend(&amp;mask);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(-</span><span style="color:#ff0000;">1</span><span style="color:#000000;">&nbsp;==&nbsp;ret&nbsp;&amp;&amp;&nbsp;errno&nbsp;==&nbsp;EINTR)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;sigsuspend&nbsp;success!&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;sec&nbsp;=&nbsp;alarm(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sigaction(SIGALRM,&nbsp;&amp;oldact,&nbsp;</span><span style="color:#0000ff;">NULL</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;sec;<BR>
}<BR>
</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;main()<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">while</span><span style="color:#000000;">(</span><span style="color:#ff0000;">1</span><span style="color:#000000;">)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;Start&nbsp;the&nbsp;timer&nbsp;...&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mysleep(</span><span style="color:#ff0000;">5</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;End&nbsp;the&nbsp;timer!&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
}</span></div></td></tr></table></div>
<br>
<br><font color=black size = 5><a name="bc3">ç«æ€æ¡ä»¶æ€»ç»“</a></font>
<br> â— ç«æ€æ¡ä»¶ï¼Œè·Ÿç³»ç»Ÿè´Ÿè½½æœ‰å¾ˆç´§å‡‘çš„å…³ç³»ï¼Œä½“ç°å‡ºä¿¡å·çš„ä¸å¯é æ€§ï¼Œç³»ç»Ÿè´Ÿè½½è¶Šä¸¥é‡ï¼Œä¿¡å·ä¸å¯é æ€§è¶Šå¼º
<br> â— ä¸å¯é ç”±å…¶å®ç°åŸç†æ‰€è‡´ï¼Œä¿¡å·æ˜¯é€šè¿‡è½¯ä»¶æ–¹å¼å®ç°(è·Ÿå†…æ ¸è°ƒåº¦é«˜åº¦ä¾èµ–ï¼Œå»¶æ—¶æ€§å¼º)ï¼Œæ¯æ¬¡ç³»ç»Ÿè°ƒç”¨ç»“æŸåæˆ–ä¸­æ–­å¤„ç†ç»“æŸåï¼Œéœ€é€šè¿‡æ‰«æPCBä¸­çš„æœªå†³ä¿¡å·é›†æ¥åˆ¤æ–­æ˜¯å¦å¤„ç†æŸä¸ªä¿¡å·ï¼Œå½“ç³»ç»Ÿè´Ÿè½½è¿‡é‡æ—¶ï¼Œä¼šå‡ºç°æ—¶åºæ··ä¹±
<br> â— è¿™ç§æ„å¤–æƒ…å†µåªèƒ½åœ¨ç¼–å†™ç¨‹åºè¿‡ç¨‹ä¸­é¢„è§ï¼Œä¸»åŠ¨è§„é¿ï¼Œè€Œæ— æ³•é€šè¿‡gdbç¨‹åºè°ƒè¯•ç­‰å…¶å®ƒæ‰‹æ®µå¼¥è¡¥ï¼Œä¸”ç”±äºè¯¥é”™è¯¯ä¸å…·è§„å¾‹æ€§ï¼ŒåæœŸæ•æ‰å’Œé‡ç°ååˆ†å›°éš¾
<br>
<br><font color=black size = 5><a name="bc4">å…¨å±€å˜é‡å¼‚æ­¥I/O</a></font>
<br> ğŸ˜„ åˆ†æå¦‚ä¸‹çˆ¶å­è¿›ç¨‹äº¤æ›¿æ•°æ•°ç¨‹åºï¼Œå½“æ•æ‰å‡½æ•°é‡Œé¢çš„sleepå–æ¶ˆï¼Œç¨‹åºå³ä¼šå‡ºç°é—®é¢˜ï¼Œè¯·åˆ†æåŸå› ã€‚
<br><div style="width:100%;border:1px #e3e3e3 solid;"><div style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;border-bottom:1px solid #e3e3e3;margin-top:5px;color:#000000;">&nbsp;C++ Code&nbsp;</div><table style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;vertical-align:text-top;line-height:15px;" border="0" cellspacing="0" cellpadding="0"><tr><td style="color:#008284;background-color:#e3e3e3;vertical-align:text-top;"><div style="margin:7px;text-align:right;white-space:nowrap;"><nobr>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br></nobr></div></td><td style="background-color:#008284;padding:1px;"><div style="border:1px #008284 solid;"></div></td><td style="background-color:#efefef;width:100%;vertical-align:text-top;color:#000000;"><div style="margin:7px;"><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;stdio.h&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;signal.h&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;unistd.h&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;stdlib.h&gt;<BR>
<BR>
</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;n&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">,&nbsp;flag&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
</span><span style="color:#8000ff;">void</span><span style="color:#000000;">&nbsp;sys_err(</span><span style="color:#8000ff;">char</span><span style="color:#000000;">&nbsp;*str)<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;perror(str);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color:#ff0000;">1</span><span style="color:#000000;">);<BR>
}<BR>
</span><span style="color:#8000ff;">void</span><span style="color:#000000;">&nbsp;do_sig_child(</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;num)<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;printf(</span><span style="color:#800000;">&quot;I&nbsp;am&nbsp;child&nbsp;&nbsp;%d\t%d\n&quot;</span><span style="color:#000000;">,&nbsp;getpid(),&nbsp;n);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;+=&nbsp;</span><span style="color:#ff0000;">2</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;flag&nbsp;=&nbsp;</span><span style="color:#ff0000;">1</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;sleep(</span><span style="color:#ff0000;">1</span><span style="color:#000000;">);<BR>
}<BR>
</span><span style="color:#8000ff;">void</span><span style="color:#000000;">&nbsp;do_sig_parent(</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;num)<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;printf(</span><span style="color:#800000;">&quot;I&nbsp;am&nbsp;parent&nbsp;%d\t%d\n&quot;</span><span style="color:#000000;">,&nbsp;getpid(),&nbsp;n);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;+=&nbsp;</span><span style="color:#ff0000;">2</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;flag&nbsp;=&nbsp;</span><span style="color:#ff0000;">1</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;sleep(</span><span style="color:#ff0000;">1</span><span style="color:#000000;">);<BR>
}<BR>
</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;main(</span><span style="color:#8000ff;">void</span><span style="color:#000000;">)<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;pid_t&nbsp;pid;<BR>
</span><span style="color:#0000ff;">struct</span><span style="color:#000000;">&nbsp;sigaction&nbsp;act;<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;((pid&nbsp;=&nbsp;fork())&nbsp;&lt;&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys_err(</span><span style="color:#800000;">&quot;fork&quot;</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">else</span><span style="color:#000000;">&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(pid&nbsp;&gt;&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;=&nbsp;</span><span style="color:#ff0000;">1</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sleep(</span><span style="color:#ff0000;">1</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;act.sa_handler&nbsp;=&nbsp;do_sig_parent;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sigemptyset(&amp;act.sa_mask);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;act.sa_flags&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//æ³¨å†Œè‡ªå·±çš„ä¿¡å·æ•æ‰å‡½æ•°&nbsp;&nbsp;çˆ¶ä½¿ç”¨SIGUSR2ä¿¡å·<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sigaction(SIGUSR2,&nbsp;&amp;act,&nbsp;</span><span style="color:#0000ff;">NULL</span><span style="color:#000000;">);&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_sig_parent(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">while</span><span style="color:#000000;">&nbsp;(</span><span style="color:#ff0000;">1</span><span style="color:#000000;">)&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">/*&nbsp;wait&nbsp;for&nbsp;signal&nbsp;*/</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(flag&nbsp;==&nbsp;</span><span style="color:#ff0000;">1</span><span style="color:#000000;">)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//çˆ¶è¿›ç¨‹æ•°æ•°å®Œæˆ<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kill(pid,&nbsp;SIGUSR1);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flag&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//æ ‡å¿—å·²ç»ç»™å­è¿›ç¨‹å‘é€å®Œä¿¡å·<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</span><span style="color:#0000ff;">else</span><span style="color:#000000;">&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(pid&nbsp;==&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;=&nbsp;</span><span style="color:#ff0000;">2</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;act.sa_handler&nbsp;=&nbsp;do_sig_child;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sigemptyset(&amp;act.sa_mask);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;act.sa_flags&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sigaction(SIGUSR1,&nbsp;&amp;act,&nbsp;</span><span style="color:#0000ff;">NULL</span><span style="color:#000000;">);<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">while</span><span style="color:#000000;">&nbsp;(</span><span style="color:#ff0000;">1</span><span style="color:#000000;">)&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">/*&nbsp;waiting&nbsp;for&nbsp;a&nbsp;signal&nbsp;*/</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(flag&nbsp;==&nbsp;</span><span style="color:#ff0000;">1</span><span style="color:#000000;">)&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kill(getppid(),&nbsp;SIGUSR2);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flag&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
}</span></div></td></tr></table></div>
<br> â— ç¤ºä¾‹ä¸­ï¼Œé€šè¿‡flagå˜é‡æ ‡è®°ç¨‹åºå®è¡Œè¿›åº¦ï¼Œflagç½®1è¡¨ç¤ºæ•°æ•°å®Œæˆï¼Œflagç½®0è¡¨ç¤ºç»™å¯¹æ–¹å‘é€ä¿¡å·å®Œæˆã€‚
<br> â— é—®é¢˜å‡ºç°çš„ä½ç½®ï¼Œåœ¨çˆ¶å­è¿›ç¨‹killå‡½æ•°ä¹‹åéœ€è¦ç´§æ¥ç€è°ƒç”¨ flagï¼Œå°†å…¶ç½®0ï¼Œæ ‡è®°ä¿¡å·å·²ç»å‘é€ï¼Œä½†ï¼Œåœ¨è¿™æœŸé—´å¾ˆæœ‰å¯èƒ½è¢«kernelè°ƒåº¦ï¼Œå¤±å»æ‰§è¡Œæƒåˆ©ï¼Œè€Œå¯¹æ–¹è·å–äº†æ‰§è¡Œæ—¶é—´ï¼Œé€šè¿‡å‘é€ä¿¡å·å›è°ƒæ•æ‰å‡½æ•°ï¼Œä»è€Œä¿®æ”¹äº†å…¨å±€çš„flagã€‚
<br> â— å¦‚ä½•è§£å†³è¯¥é—®é¢˜å‘¢ï¼Ÿå¯ä»¥ä½¿ç”¨åç»­è¯¾ç¨‹è®²åˆ°çš„â€œé”â€æœºåˆ¶ï¼Œå½“æ“ä½œå…¨å±€å˜é‡çš„æ—¶å€™ï¼Œé€šè¿‡åŠ é”ã€è§£é”æ¥è§£å†³è¯¥é—®é¢˜ã€‚
<br> â— ç°é˜¶æ®µï¼Œæˆ‘ä»¬åœ¨ç¼–ç¨‹æœŸé—´å¦‚è‹¥ä½¿ç”¨å…¨å±€å˜é‡ï¼Œåº”åœ¨ä¸»è§‚ä¸Šæ³¨æ„å…¨å±€å˜é‡çš„å¼‚æ­¥IOå¯èƒ½é€ æˆçš„é—®é¢˜ã€‚
<br>
<br><font color=black size = 5><a name="bc5">å¯/ä¸å¯é‡å…¥å‡½æ•°</a></font>
<br> â— ä¸€ä¸ªå‡½æ•°åœ¨è¢«è°ƒç”¨æ‰§è¡ŒæœŸé—´(å°šæœªè°ƒç”¨ç»“æŸ)ï¼Œç”±äºæŸç§æ—¶åºåŸå› åˆè¢«é‡å¤è°ƒç”¨ï¼Œç§°ä¹‹ä¸ºâ€œé‡å…¥â€ï¼Œæ ¹æ®å‡½æ•°å®ç°çš„æ–¹æ³•å¯åˆ†ä¸ºâ€œå¯é‡å…¥å‡½æ•°â€å’Œâ€œä¸å¯é‡å…¥å‡½æ•°â€ä¸¤ç§ï¼Œä¾‹å¦‚å¦‚ä¸‹æ—¶åºï¼š
<br><img src="https://github.com/oubc/oubc.github.io/blob/master/images/L18_OScode0.png?raw=true" width="800" height="450" />
<br> â— æ˜¾ç„¶ï¼Œinsert å‡½æ•°æ˜¯ä¸å¯é‡å…¥å‡½æ•°ï¼Œé‡ç”¨è°ƒç”¨ï¼Œä¼šå¯¼è‡´æ„å¤–ç»“æœå‘ˆç°ã€‚ç©¶å…¶åŸå› ï¼Œæ˜¯è¯¥å‡½æ•°å†…éƒ¨å®ç°ä½¿ç”¨äº†å…¨å±€å˜é‡
<br> â— æ³¨æ„ï¼š
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0ã€å®šä¹‰å¯é‡å…¥å‡½æ•°ï¼Œå‡½æ•°å†…éƒ¨ä¸èƒ½å«æœ‰å…¨å±€å˜é‡åŠstaticå˜é‡ï¼Œä¸èƒ½ä½¿ç”¨mallocã€freeï¼Œå®ƒåº•å±‚ç”±å…¨å±€æŒ‡é’ˆå®ç°
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1ã€ä¿¡å·æ•æ‰å‡½æ•°åº”è®¾è®¡ä¸ºå¯é‡å…¥å‡½æ•°
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2ã€ä¿¡å·å¤„ç†ç¨‹åºå¯ä»¥è°ƒç”¨çš„å¯é‡å…¥å‡½æ•°å¯å‚é˜…å‘½ä»¤ man 7 signal
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3ã€æ²¡æœ‰åŒ…å«åœ¨ä¸Šè¿°åˆ—è¡¨ä¸­çš„å‡½æ•°å¤§å¤šæ•°æ˜¯ä¸å¯é‡å…¥çš„ï¼Œå…¶åŸå› ä¸ºï¼š
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a) ä½¿ç”¨äº†é™æ€æ•°æ®ç»“æ„
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b) è°ƒç”¨äº†mallocæˆ–free
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; c) æ˜¯æ ‡å‡†I/Oå‡½æ•°
<br>
<br><font color=black size = 5><a name="bc6">SIGCHLDä¿¡å·çš„äº§ç”Ÿæ¡ä»¶</a></font>
<br> â— å­è¿›ç¨‹ç»ˆæ­¢æ—¶
<br> â— å­è¿›ç¨‹æ¥å—åˆ° SIGSTOP ä¿¡å·åœæ­¢æ—¶
<br> â— å­è¿›ç¨‹å¤„äºåœæ­¢æ€ï¼Œæ¥å—åˆ° SIGCONT åè¢«å”¤é†’æ—¶
<br>
<br><font color=black size = 5><a name="bc7">å€ŸåŠ©SIGCHLDä¿¡å·å›æ”¶å­è¿›ç¨‹</a></font>
<br> â— å­è¿›ç¨‹ç»“æŸè¿è¡Œï¼Œå…¶çˆ¶è¿›ç¨‹ä¼šæ”¶åˆ°SIGCHLDä¿¡å·ï¼Œè¯¥ä¿¡å·çš„é»˜è®¤å¤„ç†åŠ¨ä½œæ˜¯å¿½ç•¥ï¼Œå¯ä»¥æ•æ‰è¯¥ä¿¡å·ï¼Œåœ¨æ•æ‰å‡½æ•°ä¸­å®Œæˆå­è¿›ç¨‹çŠ¶æ€çš„å›æ”¶
<br> ğŸ˜„ ç¼–ç¨‹å®æˆ˜ï¼šå€ŸåŠ©ä¿¡å·å®Œæˆè¿›ç¨‹å›æ”¶
<br><div style="width:100%;border:1px #e3e3e3 solid;"><div style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;border-bottom:1px solid #e3e3e3;margin-top:5px;color:#000000;">&nbsp;C++ Code&nbsp;</div><table style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;vertical-align:text-top;line-height:15px;" border="0" cellspacing="0" cellpadding="0"><tr><td style="color:#008284;background-color:#e3e3e3;vertical-align:text-top;"><div style="margin:7px;text-align:right;white-space:nowrap;"><nobr>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br>66<br></nobr></div></td><td style="background-color:#008284;padding:1px;"><div style="border:1px #008284 solid;"></div></td><td style="background-color:#efefef;width:100%;vertical-align:text-top;color:#000000;"><div style="margin:7px;"><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;iostream&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;unistd.h&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;signal.h&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;stdlib.h&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;sys/types.h&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;sys/wait.h&gt;<BR>
</span><span style="color:#0000ff;">using</span><span style="color:#000000;">&nbsp;</span><span style="color:#0000ff;">namespace</span><span style="color:#000000;">&nbsp;std;<BR>
</span><span style="color:#8000ff;">void</span><span style="color:#000000;">&nbsp;dosigChild(</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;signo)<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;status;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pid_t&nbsp;pid;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;å¤„ç†å¤šä¸ªè¿›ç¨‹åŒæ—¶æ­»äº¡ï¼Œæ‰€ä»¥ä¸èƒ½åªç”¨&nbsp;ifæ¡ä»¶è¯­å¥&nbsp;åˆ¤æ–­<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">while</span><span style="color:#000000;">((pid&nbsp;=&nbsp;waitpid(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">,&nbsp;&amp;status,&nbsp;WNOHANG))&gt;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(WIFEXITED(status))<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;Child&nbsp;&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;pid&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;&nbsp;exit&nbsp;&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;WEXITSTATUS(status)&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">else</span><span style="color:#000000;">&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(WIFSIGNALED(status))<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;Child&nbsp;&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;pid&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;&nbsp;cancel&nbsp;signal&nbsp;&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;WTERMSIG(status)&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
}<BR>
</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;main()<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pid_t&nbsp;pid;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;i;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">for</span><span style="color:#000000;">&nbsp;(i&nbsp;=</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;&nbsp;i&nbsp;&lt;&nbsp;</span><span style="color:#ff0000;">10</span><span style="color:#000000;">;&nbsp;i++)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;((pid&nbsp;=&nbsp;fork())&nbsp;==&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">break</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">else</span><span style="color:#000000;">&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(pid&nbsp;&lt;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cerr&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;fork&nbsp;error!&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color:#ff0000;">1</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(pid&nbsp;==&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;n&nbsp;=&nbsp;</span><span style="color:#ff0000;">1</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">while</span><span style="color:#000000;">&nbsp;(n--)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;Child&nbsp;ID&nbsp;is&nbsp;&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;getpid()&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sleep(</span><span style="color:#ff0000;">1</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;i&nbsp;+&nbsp;</span><span style="color:#ff0000;">1</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">else</span><span style="color:#000000;">&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(pid&nbsp;&gt;&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;SIGCHLD&nbsp;é˜»å¡<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">struct</span><span style="color:#000000;">&nbsp;sigaction&nbsp;act;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;act.sa_handler&nbsp;=&nbsp;dosigChild;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sigemptyset(&amp;act.sa_mask);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;act.sa_flags&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sigaction(SIGCHLD,&nbsp;&amp;act,&nbsp;</span><span style="color:#0000ff;">NULL</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">while</span><span style="color:#000000;">(</span><span style="color:#ff0000;">1</span><span style="color:#000000;">)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;Parent&nbsp;ID&nbsp;is&nbsp;&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;getpid()&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sleep(</span><span style="color:#ff0000;">1</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
}</span></div></td></tr></table></div>
<br>
<br><font color=black size = 5><a name="bc8">å‘é€ä¿¡å·ä¼ å‚</a></font>
<br> â— sigqueue å‡½æ•°å¯¹åº” kill å‡½æ•°ï¼Œä½†å¯åœ¨å‘æŒ‡å®šè¿›åº¦å‘é€ä¿¡å·çš„åŒæ—¶æºå¸¦å‚æ•°
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int sigqueue(pid_t pid, int sig, const union sigval value);   æˆåŠŸè¿”å›0ï¼Œå¤±è´¥è¿”å›-1ï¼Œè®¾ç½®errno
<br> union sigval {
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int   sival_int;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // æ³›å‹æŒ‡é’ˆï¼Œå¯ä¸ºå­—ç¬¦ä¸²ã€æ•°ã€æ•°ç»„...ï¼Œéœ€ä¸ºè™šæ‹Ÿåœ°å€
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; void *sival_ptr;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };
<br> â— å¯ç»™å…¶å®ƒè¿›ç¨‹å‘é€ï¼Œä¹Ÿå¯ä»¥ç»™æœ¬è¿›ç¨‹ä¼ å‚
<br> â— å‘æŒ‡å®šè¿›ç¨‹å‘é€æŒ‡å®šä¿¡å·çš„åŒæ—¶ï¼Œæºå¸¦æ•°æ®ï¼Œä½†æ˜¯ä¼ é€’åœ°å€éœ€è¦æ³¨æ„ï¼Œä¸åŒè¿›ç¨‹ä¹‹é—´è™šæ‹Ÿåœ°å€ç©ºé—´å„è‡ªç‹¬ç«‹ï¼Œå°†å½“å‰è¿›ç¨‹åœ°å€ä¼ é€’ç»™å¦ä¸€è¿›ç¨‹æ²¡æœ‰å®é™…æ„ä¹‰
<br>
<br><font color=black size = 5><a name="bc9">æ•æ‰å‡½æ•°ä¼ å‚</a></font>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int sigaction(int signum, const struct sigaction *act, struct sigaction *oldact);
<br><div style="width:100%;border:1px #e3e3e3 solid;"><div style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;border-bottom:1px solid #e3e3e3;margin-top:5px;color:#000000;">&nbsp;C++ Code&nbsp;</div><table style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;vertical-align:text-top;line-height:15px;" border="0" cellspacing="0" cellpadding="0"><tr><td style="color:#008284;background-color:#e3e3e3;vertical-align:text-top;"><div style="margin:7px;text-align:right;white-space:nowrap;"><nobr>1<br>2<br>3<br>4<br>5<br>6<br>7<br></nobr></div></td><td style="background-color:#008284;padding:1px;"><div style="border:1px #008284 solid;"></div></td><td style="background-color:#efefef;width:100%;vertical-align:text-top;color:#000000;"><div style="margin:7px;"><span style="color:#0000ff;">struct</span><span style="color:#000000;">&nbsp;sigaction&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">void</span><span style="color:#000000;">&nbsp;(*sa_handler)(</span><span style="color:#8000ff;">int</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">void</span><span style="color:#000000;">&nbsp;(*sa_sigaction)(</span><span style="color:#8000ff;">int</span><span style="color:#000000;">,&nbsp;siginfo_t&nbsp;*,&nbsp;</span><span style="color:#8000ff;">void</span><span style="color:#000000;">&nbsp;*);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sigset_t&nbsp;&nbsp;&nbsp;sa_mask;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;sa_flags;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">void</span><span style="color:#000000;">&nbsp;(*sa_restorer)(</span><span style="color:#8000ff;">void</span><span style="color:#000000;">);<BR>
};</span></div></td></tr></table></div>
<br> â— å½“æ³¨å†Œä¿¡å·æ•æ‰å‡½æ•°ï¼Œå¸Œæœ›è·å–æ›´å¤šä¿¡å·ç›¸å…³ä¿¡æ¯ï¼Œä¸åº”ä½¿ç”¨sa_handlerè€Œåº”è¯¥ä½¿ç”¨sa_sigactionã€‚ä½†æ­¤æ—¶çš„sa_flagså¿…é¡»æŒ‡å®šä¸ºSA_SIGINFOã€‚siginfo_tæ˜¯ä¸€ä¸ªæˆå‘˜ååˆ†ä¸°å¯Œçš„ç»“æ„ä½“ç±»å‹ï¼Œå¯ä»¥æºå¸¦å„ç§ä¸ä¿¡å·ç›¸å…³çš„æ•°æ®ã€‚
<br>
<br><font color=black size = 5><a name="bc10">ä¸­æ–­ç³»ç»Ÿè°ƒç”¨</a></font>
<br>ç³»ç»Ÿè°ƒç”¨å¯åˆ†ä¸ºä¸¤ç±»ï¼šæ…¢é€Ÿç³»ç»Ÿè°ƒç”¨å’Œå…¶ä»–ç³»ç»Ÿè°ƒç”¨
<br> â— 0.æ…¢é€Ÿç³»ç»Ÿè°ƒç”¨ï¼šå¯èƒ½ä¼šä½¿è¿›ç¨‹æ°¸è¿œé˜»å¡çš„ä¸€ç±»ã€‚å¦‚æœåœ¨é˜»å¡æœŸé—´æ”¶åˆ°ä¸€ä¸ªä¿¡å·ï¼Œè¯¥ç³»ç»Ÿè°ƒç”¨å°±è¢«ä¸­æ–­,ä¸å†ç»§ç»­æ‰§è¡Œ(æ—©æœŸ)ï¼›ä¹Ÿå¯ä»¥è®¾å®šç³»ç»Ÿè°ƒç”¨æ˜¯å¦é‡å¯ã€‚å¦‚ï¼Œreadã€writeã€pauseã€wait...
<br> â— 1.å…¶ä»–ç³»ç»Ÿè°ƒç”¨ï¼šgetpidã€getppidã€fork...
<br>ç»“åˆpauseï¼Œå›é¡¾æ…¢é€Ÿç³»ç»Ÿè°ƒç”¨ï¼š
<br>æ…¢é€Ÿç³»ç»Ÿè°ƒç”¨è¢«ä¸­æ–­çš„ç›¸å…³è¡Œä¸ºï¼Œå®é™…ä¸Šå°±æ˜¯pauseçš„è¡Œä¸ºï¼š å¦‚ï¼Œread
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; â‘  æƒ³ä¸­æ–­pauseï¼Œä¿¡å·ä¸èƒ½è¢«å±è”½ã€‚
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; â‘¡ ä¿¡å·çš„å¤„ç†æ–¹å¼å¿…é¡»æ˜¯æ•æ‰ (é»˜è®¤ã€å¿½ç•¥éƒ½ä¸å¯ä»¥)
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; â‘¢ ä¸­æ–­åè¿”å›-1ï¼Œ è®¾ç½®errnoä¸ºEINTR(è¡¨â€œè¢«ä¿¡å·ä¸­æ–­â€)
<br> â— å¯ä¿®æ”¹sa_flagså‚æ•°æ¥è®¾ç½®è¢«ä¿¡å·ä¸­æ–­åç³»ç»Ÿè°ƒç”¨æ˜¯å¦é‡å¯ï¼ŒSA_INTERRURTä¸é‡å¯ã€SA_RESTARTé‡å¯ã€‚
<br> ğŸ˜„ æ‰©å±•äº†è§£ï¼š
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sa_flagsè¿˜æœ‰å¾ˆå¤šå¯é€‰å‚æ•°ï¼Œé€‚ç”¨äºä¸åŒæƒ…å†µã€‚å¦‚ï¼šæ•æ‰åˆ°ä¿¡å·åï¼Œåœ¨æ‰§è¡Œæ•æ‰å‡½æ•°æœŸé—´ï¼Œä¸å¸Œæœ›è‡ªåŠ¨é˜»å¡è¯¥ä¿¡å·ï¼Œå¯å°†sa_flagsè®¾ç½®ä¸ºSA_NODEFERï¼Œé™¤ésa_maskä¸­åŒ…å«è¯¥ä¿¡å·ã€‚</p>

<p><br><br><br>
<font color = gray size = 3>å¦‚æœ‰é”™è¯¯ï¼Œæ¬¢è¿æŒ‡æ­£ï¼</font></p></div>
        <div class="post_footer">
          
          <div class="meta">
            <div class="info">
              <span class="field tags">
                <i class="remixicon-stack-line"></i>
                
                <a href="https://oubc.github.io/tags/linux/">Linux</a>
                
              </span>
            </div>
          </div>
          
        </div>
      </div>
      
      
    </div>
  </div>
  <a id="back_to_top" href="#" class="back_to_top"><span>â–³</span></a>
</div>
<footer class="footer">
  <div class="powered_by">
    <a href="https://wxt.sinaimg.cn/thumb300/007Diza3ly1g4l9lmg4aog3074074gnf.gif?tags=%5B%5D">I </a>
	<a href="">love</a>
    <a href="https://wxt.sinaimg.cn/thumb300/007Diza3ly1g4l9lmfm2eg306o06o74u.gif?tags=%5B%5D"> you </a>
    <a href="https://wxt.sinaimg.cn/thumb300/007Diza3ly1g4njrx4tpcj30fn0bq3zg.jpg?tags=%5B%5D">three </a>
	<a href="https://wxt.sinaimg.cn/thumb300/007Diza3ly1g4njrx64ctg307s07swfy.gif?tags=%5B%5D">thousand</a>
    <a href="https://www.kugou.com/song/#hash=96426C78381DE98DC31A5846FC274CBF&album_id=646623"> times.</a>
  </div>

  <div class="footer_slogan">
    <span>å®¶åº­ã€æ¢¦æƒ³ã€å†…å¿ƒçš„å¹³é™</span>
  </div>
</footer>



<script src="https://oubc.github.io/js/jquery-3.3.1.min.js"></script>
<script src="https://oubc.github.io/js/zozo.js"></script>
<script src="https://oubc.github.io/js/highlight.pack.js"></script>
<link  href="https://oubc.github.io/css/fancybox.min.css" rel="stylesheet">
<script src="https://oubc.github.io/js/fancybox.min.js"></script>

<script>hljs.initHighlightingOnLoad()</script>


  <script type="text/javascript" async src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[\[','\]\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});

MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<style>
code.has-jax {
    font: inherit;
    font-size: 100%;
    background: inherit;
    border: inherit;
    color: #515151;
}
</style>






</body>
</html>
