<!DOCTYPE html>
<html lang="zh-cn" >
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  
  <meta name="author"
        content="Bruce Cheung"/>

  
  <meta name="description" content=""/>
  

  
  
  <meta name="keywords" content="blog, simple, dream"/>
  

  
  <link rel="canonical" href="https://oubc.github.io/post/o10_mysql1/"/>

  

  <title>MySQLç¨‹åºå¼€å‘ &middot; Love, or death</title>

  <link rel="shortcut icon" href="https://oubc.github.io/images/favicon.ico"/>
  <link rel="stylesheet" href="https://oubc.github.io/css/animate.min.css"/>
  <link rel="stylesheet" href="https://oubc.github.io/css/remixicon.css"/>
  <link rel="stylesheet" href="https://oubc.github.io/css/zozo.css"/>
  <link rel="stylesheet" href="https://oubc.github.io/css/highlight.css"/>

  
  
</head>

<body>
<div class="main animated">
  <div class="nav_container animated fadeInDown">
  <div class="site_nav" id="site_nav">
    <ul>
      
      <li>
        <a href="/">é¦–é¡µ</a>
      </li>
      
      <li>
        <a href="/post/">å½’æ¡£</a>
      </li>
      
      <li>
        <a href="/tags/">æ ‡ç­¾</a>
      </li>
      
      <li>
        <a href="/about/">å…³äº</a>
      </li>
      
    </ul>
  </div>
  <div class="menu_icon">
    <a id="menu_icon"><i class="remixicon-links-line"></i></a>
  </div>
</div>

  <div class="header animated fadeInDown">
  <div class="site_title_container">
    <div class="site_title">
      <h1>
        <a href="https://oubc.github.io/">
          <span>Love, or death</span>
          <img src="https://oubc.github.io/images/logo.svg"/>
        </a>
      </h1>
    </div>
    <div class="description">
      <p class="sub_title">For you, a thousand times over.</p>
      <div class="my_socials">
        
        
        <a href="https://github.com/oubc" title="github" target="_blank"><i class="remixicon-github-fill"></i></a>
        
        
        
        <a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=uYGOjo6OiIuLivnIyJfa1tQ" title="mail" target="_blank"><i class="remixicon-mail-fill"></i></a>
        
        
        
        <a href="http://sighttp.qq.com/msgrd?v=1&amp;uin=877771223" title="qq" target="_blank"><i class="remixicon-qq-fill"></i></a>
        
        
        
        <a href="https://github.com/oubc/oubc.github.io/blob/master/images/wx.jpg?raw=true" title="wechat" target="_blank"><i class="remixicon-wechat-fill"></i></a>
        
        
        
        <a href="https://weibo.com/u/6993631995?topnav=1&amp;wvr=6&amp;topsug=1" title="weibo" target="_blank"><i class="remixicon-weibo-fill"></i></a>
        
        
        <a href="https://oubc.github.io/index.xml" type="application/rss+xml" title="rss" target="_blank"><i class="remixicon-rss-fill"></i></a>
      </div>
    </div>
  </div>
</div>

  <div class="content">
    <div class="post_page">
      <div class="post animated fadeInDown">
        <div class="post_title post_detail_title">
          <h2><a href='/post/o10_mysql1/'>MySQLç¨‹åºå¼€å‘</a></h2>
          <span class="date">2019.11.18</span>
        </div>
        <div class="post_content markdown"><p><br>
<br>
<font color = gray size = 2>åˆ—è¡¨ï¼Œç‚¹å‡»è·³è½¬</font>
<br><font color=blue size = 4><a href="#bc0">MySQL</a></font>
<br><font color=blue size = 4><a href="#bc1">æŸ¥è¯¢åº“æ‰€åœ¨ç›®å½•</a></font>
<br><font color=blue size = 4><a href="#bc2">MySQL API è°ƒç”¨æµç¨‹</a></font>
<br><font color=blue size = 4><a href="#bc3">ç¼–è¯‘é”™è¯¯åŸå› åˆ†æ</a></font>
<br><font color=blue size = 4><a href="#bc4">æœ€ç»ˆgcc/g++ ç¼–è¯‘</a></font>
<br><font color=blue size = 4><a href="#bc5">åˆå§‹åŒ–æ•°æ®åº“</a></font>
<br><font color=blue size = 4><a href="#bc6">è¿æ¥æ•°æ®åº“</a></font>
<br><font color=blue size = 4><a href="#bc7">æ‰§è¡ŒæŸ¥è¯¢è¯­å¥</a></font>
<br><font color=blue size = 4><a href="#bc8">è·å–ç»“æœé›†çš„ä¸¤ç§æ–¹å¼</a></font>
<br><font color=blue size = 4><a href="#bc9">è§£æç»“æœé›†</a></font>
<br><font color=blue size = 4><a href="#bc10">é‡Šæ”¾ç»“æœé›†</a></font>
<br><font color=green size = 4><a href="#bc11">æ£€ç´¢</a></font>
<br><font color=green size = 4><a href="#bc12">mysql tool å·¥å…·å¼€å‘</a></font>
<br><font color=green size = 4><a href="#bc13">MySQL å›æ˜¾é—®é¢˜</a></font>
<br><font color=green size = 4><a href="#bc14">MySQL ä¸Šä¸‹é”®é—®é¢˜</a></font>
<br><font color=green size = 4><a href="#bc15">MySQLé¢„å¤„ç†</a></font>
<br><font color=green size = 4><a href="#bc16">MySQLæ—¶é—´ç±»</a></font>
<br><font color=green size = 4><a href="#bc17">å¤šæŸ¥è¯¢æ‰§è¡Œçš„ C API å¤„ç† (multsql)</a></font>
<br><font color=green size = 4><a href="#bc18">MySQLçš„äº‹åŠ¡</a></font>
<br>
<br>
<br><font color=green size = 5><a name="bc0">MySQL</a></font>
<br> ğŸ¬ MySQLä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªåŠ¨æ€åº“ï¼Œé€šè¿‡è¿™ä¸ªåŠ¨æ€åº“å¯ä»¥è®¿é—®MySQLæœåŠ¡å™¨
<br> ğŸ¬ æœ‰å…³MySQLClientåº“ï¼šC APIs åŒ…å«åœ¨mysqlclientåº“æ–‡ä»¶ä¸­ï¼Œä¸MySQLçš„æºä»£ç ä¸€å—å‘è¡Œï¼Œç”¨äºè¿æ¥åˆ°æ•°æ®åº“å’Œæ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢
<br>
<br><font color=green size = 5><a name="bc1">æŸ¥è¯¢åº“æ‰€åœ¨ç›®å½•</a></font>
<br> ğŸ¬ å‘½ä»¤ï¼šfind / -name &quot;libmysqlclient.*&quot;
<br> ğŸ¬ å‘½ä»¤ï¼šfind / -name &quot;mysql.h&quot;    æŸ¥è¯¢å¤´æ–‡ä»¶æ‰€åœ¨ç›®å½•
<br> ğŸ¬ æ‰€ä»¥ g++ ç¼–è¯‘å‘½ä»¤ä¸º
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; g++ æºæ–‡ä»¶ -o ç›®æ ‡æ–‡ä»¶ -I /usr/include/mysql/mysql.h -L /usr/lib64/mysql/ -l mysqlclient
<br>
<br><font color=green size = 5><a name="bc2">MySQL API è°ƒç”¨æµç¨‹</a></font>
<br> ç¬¬ä¸€æ­¥ï¼šMySQL åˆå§‹åŒ–ï¼Œè·å¾—å¥æŸ„
<br> ç¬¬äºŒæ­¥ï¼šå»ºç«‹è¿æ¥
<br> ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡ŒSQLè¯­å¥
<br> ç¬¬å››æ­¥ï¼šè·å¾—ç»“æœ
<br><div style="width:100%;border:1px #e3e3e3 solid;"><div style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;border-bottom:1px solid #e3e3e3;margin-top:5px;color:#000000;">&nbsp;C++ Code&nbsp;</div><table style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;vertical-align:text-top;line-height:15px;" border="0" cellspacing="0" cellpadding="0"><tr><td style="color:#008284;background-color:#e3e3e3;vertical-align:text-top;"><div style="margin:7px;text-align:right;white-space:nowrap;"><nobr>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br></nobr></div></td><td style="background-color:#008284;padding:1px;"><div style="border:1px #008284 solid;"></div></td><td style="background-color:#efefef;width:100%;vertical-align:text-top;color:#000000;"><div style="margin:7px;"><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;iostream&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;mysql/mysql.h&gt;<BR>
</span><span style="color:#0000ff;">using</span><span style="color:#000000;">&nbsp;</span><span style="color:#0000ff;">namespace</span><span style="color:#000000;">&nbsp;std;<BR>
<BR>
</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;mian()<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;ret;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;è·å–é”™è¯¯ç <BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;MYSQL&nbsp;mysql;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;MYSQL&nbsp;*connect;<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;å»ºç«‹å¥æŸ„<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;connect&nbsp;=&nbsp;mysql_init(&amp;mysql)<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(connect&nbsp;==&nbsp;</span><span style="color:#0000ff;">NULL</span><span style="color:#000000;">)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;mysql_errno(&amp;mysql);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;func&nbsp;mysql_init()&nbsp;err:&quot;</span><span style="color:#000000;"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;ret&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;ret;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;mysql_init()&nbsp;success!&quot;</span><span style="color:#000000;"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;endl;<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;mysql_close(&amp;mysql);&nbsp;&nbsp;&nbsp;&nbsp;é‡Šæ”¾å¥æŸ„<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
}</span></div></td></tr></table></div>
<br>
<br><font color=green size = 5><a name="bc3">ç¼–è¯‘é”™è¯¯åŸå› åˆ†æ</a></font>
<br> é—®é¢˜ä¸€ï¼šä½¿ç”¨äº† g++ çš„åŸå› ï¼Œåˆ©ç”¨ gcc éœ€è¦é“¾æ¥ -lstdc++
<br> é—®é¢˜äºŒï¼šç”¨ä¸€ä¸ªç¨‹åºå»åŠ è½½äº†MySQLçš„åŠ¨æ€åº“ï¼Œéœ€è¦é“¾æ¥ -ldl åŠ¨æ€åº“
<br> é—®é¢˜ä¸‰ï¼šæ²¡æœ‰åŠ çº¿ç¨‹åº“ï¼Œéœ€è¦è¿æ¥ -lpthread
<br> é—®é¢˜å››ï¼šæ²¡æœ‰é…ç½®æ•°å­¦åº“å‡½æ•°ï¼Œéœ€è¦é“¾æ¥ -lm -lrt
<br>
<br><font color=green size = 5><a name="bc4">æœ€ç»ˆgcc/g++ ç¼–è¯‘</a></font>
<br> gcc  æºæ–‡ä»¶ -o ç›®æ ‡æ–‡ä»¶ -I /usr/include/mysql/mysql.h -L /usr/lib64/mysql/ -l mysqlclient -ldl -lpthread -lm -lrt -lstdc++
<br> g++ æºæ–‡ä»¶ -o ç›®æ ‡æ–‡ä»¶ -I /usr/include/mysql/mysql.h -L /usr/lib64/mysql/ -l mysqlclient -ldl -lpthread -lm -lrt
<br>
<br><font color=green size = 5><a name="bc5">åˆå§‹åŒ–æ•°æ®åº“</a></font>
<br> MYSQL mysql;
<br> MYSQL *connect;
<br> connect = mysql_init(&amp;mysql)<br />
<br>
<br><font color=green size = 5><a name="bc6">è¿æ¥æ•°æ®åº“</a></font>
<br> MYSQL *mysql_connect(MYSQL *mysql, const char *host, const char *user, const char *passwd);
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; host ä¸»æœºåå­—
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; user ç”¨æˆ·å
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; passwd å¯†ç 
<br> ğŸ¬ æ­¤å‡½æ•°ä»¥è¿‡æ—¶ï¼Œä½¿ç”¨
<br> MYSQL *mysql_real_connect(MYSQL *mysql, const char *host,
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; const char *user, const char *passwd, const char *db,
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned int port, const char *unix_socket, unsigned long client_flag)
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; db å“ªä¸€ä¸ªæ•°æ®åº“
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; port ç«¯å£å·ï¼Œå¦‚æœ port ä¸æ˜¯0ï¼Œå…¶å€¼å°†ç”¨ä½œTCP/IPè¿æ¥çš„ç«¯å£å·ï¼Œæ³¨æ„ï¼Œhost å‚æ•°å†³å®šäº†è¿æ¥çš„ç±»å‹
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unix_socket  å¦‚æœunix_socketä¸æ˜¯NULLï¼Œè¯¥å­—ç¬¦ä¸²æè¿°äº†åº”ä½¿ç”¨çš„å¥—æ¥å­—æˆ–å‘½åç®¡é“ï¼Œæ³¨æ„ï¼Œhost å‚æ•°å†³å®šäº†è¿æ¥çš„ç±»å‹
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; client_flag client_flagçš„å€¼é€šå¸¸ä¸º0
<br>
<br><font color=green size = 5><a name="bc7">æ‰§è¡ŒæŸ¥è¯¢è¯­å¥</a></font>
<br> int mysql_query(MYSQL *mysql, const char *query);
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; query ä¸ºéœ€è¦æ‰§è¡Œçš„MySQLè¯­å¥
<br> mysql_query()ä¸èƒ½ç”¨äºåŒ…å«äºŒè¿›åˆ¶æ•°æ®çš„æŸ¥è¯¢ï¼Œåº”ä½¿ç”¨mysql_real_query()å–è€Œä»£ä¹‹
<br>
<br><font color=green size = 5><a name="bc8">è·å–ç»“æœé›†çš„ä¸¤ç§æ–¹å¼</a></font>
<br> ğŸ¬ å…¨éƒ¨è·å–ï¼šé€šè¿‡ mysql_store_result() å°†æ•´ä¸ªç»“æœé›†å…¨éƒ¨å–å‡ºæ¥
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MYSQL_RES *mysql_store_result(MYSQL *mysql);
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å¤±è´¥è¿”å›NULL
<br> ğŸ¬ è°ƒç”¨ mysql_use_result() åˆå§‹åŒ–è·å–æ“ä½œï¼Œä½†æš‚æ—¶ä¸å–å›ä»»ä½•è®°å½•
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MYSQL_RES *mysql_use_result(MYSQL *mysql);
<br>
<br><font color=green size = 5><a name="bc9">è§£æç»“æœé›†</a></font>
<br> ğŸ¬ ä¸¤ç§æ–¹å¼å‡é€šè¿‡ mysql_fetch_row() æ¥è®¿é—®æ¯ä¸€æ¡è®°å½•
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MYSQL_ROW mysql_fetch_row(MYSQL_RES *result);
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MYSQL_ROW å³æ˜¯äºŒçº§æŒ‡é’ˆ
<br> ğŸ¬ æ³¨ï¼šè‹¥å…ˆå‰è°ƒç”¨çš„æ˜¯ mysql_store_result() ï¼Œåˆ™ç›´æ¥åœ¨æœ¬åœ°è®¿é—®è®°å½•ï¼Œè‹¥å…ˆå‰è°ƒç”¨çš„æ˜¯ mysql_use_result() ï¼Œåˆ™æ­¤æ—¶æ‰åˆ°æœåŠ¡å™¨ä¸Šå»è·å–è®°å½•
<br> ğŸ¬ å†…å­˜æ¨¡å‹åˆ†æï¼š
<br><div style="width:100%;border:1px #e3e3e3 solid;"><div style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;border-bottom:1px solid #e3e3e3;margin-top:5px;color:#000000;">&nbsp;C++ Code&nbsp;</div><table style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;vertical-align:text-top;line-height:15px;" border="0" cellspacing="0" cellpadding="0"><tr><td style="color:#008284;background-color:#e3e3e3;vertical-align:text-top;"><div style="margin:7px;text-align:right;white-space:nowrap;"><nobr>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br></nobr></div></td><td style="background-color:#008284;padding:1px;"><div style="border:1px #008284 solid;"></div></td><td style="background-color:#efefef;width:100%;vertical-align:text-top;color:#000000;"><div style="margin:7px;"><span style="color:#8000ff;">char</span><span style="color:#000000;">&nbsp;**mysql_fetch_row()<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">char</span><span style="color:#000000;">&nbsp;**tmp=(</span><span style="color:#8000ff;">char</span><span style="color:#000000;">**)malloc(</span><span style="color:#0000ff;">sizeof</span><span style="color:#000000;">(</span><span style="color:#8000ff;">char</span><span style="color:#000000;">&nbsp;*)*</span><span style="color:#ff0000;">9</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">for</span><span style="color:#000000;">&nbsp;(i&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;&nbsp;i&nbsp;&lt;&nbsp;</span><span style="color:#ff0000;">9</span><span style="color:#000000;">;&nbsp;++i)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmp[i]&nbsp;=&nbsp;(</span><span style="color:#8000ff;">char</span><span style="color:#000000;">&nbsp;*)malloc(</span><span style="color:#ff0000;">100</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;copy&nbsp;ĞªÂ§ĞĞ½<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;strcpy(tmp[</span><span style="color:#ff0000;">0</span><span style="color:#000000;">],&nbsp;</span><span style="color:#800000;">&quot;xxxx&quot;</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;strcpy(tmp[</span><span style="color:#ff0000;">1</span><span style="color:#000000;">],&nbsp;</span><span style="color:#800000;">&quot;xxxx&quot;</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;strcpy(tmp[</span><span style="color:#ff0000;">2</span><span style="color:#000000;">],&nbsp;</span><span style="color:#800000;">&quot;xxxx&quot;</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;strcpy(tmp[</span><span style="color:#ff0000;">3</span><span style="color:#000000;">],&nbsp;</span><span style="color:#800000;">&quot;xxxx&quot;</span><span style="color:#000000;">);<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;tmp;<BR>
}</span></div></td></tr></table></div>
<br>
<br><font color=green size = 5><a name="bc10">é‡Šæ”¾ç»“æœé›†</a></font>
<br> void mysql_free_result(MYSQL_RES *result);
<br>
<br><font color=green size = 5><a name="bc11">æ£€ç´¢</a></font>
<br> ğŸ¬ ä»ç»“æœé›†é‡Œè·å–/è§£æè¡¨å¤´
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åªè·å–ä¸€åˆ—
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MYSQL_FIELD *mysql_fetch_field(MYSQL_RES *result);
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; è·å–å¤šåˆ—
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MYSQL_FIELD *mysql_fetch_fields(MYSQL_RES *result);
<br> ğŸ¬ é€šè¿‡å¥æŸ„è·å–åˆ—æ•°
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned int mysql_field_count(MYSQL *mysql);
<br> ğŸ¬ é€šè¿‡ç»“æœé›†è·å–åˆ—æ•°
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned int mysql_num_fields(MYSQL_RES *result);
<br> ğŸ¬ ç¼–ç¨‹å®ä¾‹ï¼š
<br><div style="width:100%;border:1px #e3e3e3 solid;"><div style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;border-bottom:1px solid #e3e3e3;margin-top:5px;color:#000000;">&nbsp;C++ Code&nbsp;</div><table style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;vertical-align:text-top;line-height:15px;" border="0" cellspacing="0" cellpadding="0"><tr><td style="color:#008284;background-color:#e3e3e3;vertical-align:text-top;"><div style="margin:7px;text-align:right;white-space:nowrap;"><nobr>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br>66<br>67<br>68<br>69<br>70<br>71<br>72<br>73<br>74<br>75<br>76<br>77<br>78<br>79<br>80<br>81<br>82<br>83<br>84<br>85<br>86<br>87<br>88<br></nobr></div></td><td style="background-color:#008284;padding:1px;"><div style="border:1px #008284 solid;"></div></td><td style="background-color:#efefef;width:100%;vertical-align:text-top;color:#000000;"><div style="margin:7px;"><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;iostream&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;mysql/mysql.h&gt;<BR>
</span><span style="color:#0000ff;">using</span><span style="color:#000000;">&nbsp;</span><span style="color:#0000ff;">namespace</span><span style="color:#000000;">&nbsp;std;<BR>
<BR>
</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;main()<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;ret;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;è·å–é”™è¯¯ç <BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MYSQL&nbsp;mysql,&nbsp;*connect;<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;åˆå§‹åŒ–ï¼Œå»ºç«‹å¥æŸ„<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connect&nbsp;=&nbsp;mysql_init(&amp;mysql);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(</span><span style="color:#0000ff;">NULL</span><span style="color:#000000;">&nbsp;==&nbsp;connect)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;mysql_errno(&amp;mysql);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cerr&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;func&nbsp;mysql_init()&nbsp;err:&quot;</span><span style="color:#000000;"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;ret&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;ret;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;mysql_init()&nbsp;success!&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;endl;<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;è¿æ¥æ•°æ®åº“<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connect&nbsp;=&nbsp;mysql_real_connect(connect,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#800000;">&quot;locahost&quot;</span><span style="color:#000000;">,&nbsp;</span><span style="color:#800000;">&quot;root&quot;</span><span style="color:#000000;">,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#800000;">&quot;20191115&quot;</span><span style="color:#000000;">,&nbsp;</span><span style="color:#800000;">&quot;mydb&quot;</span><span style="color:#000000;">,&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">,&nbsp;</span><span style="color:#0000ff;">NULL</span><span style="color:#000000;">,&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(</span><span style="color:#0000ff;">NULL</span><span style="color:#000000;">&nbsp;==&nbsp;connect)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret=mysql_real_connect(&amp;mysql);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cerr&nbsp;&lt;&lt;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#800000;">&quot;func&nbsp;mysql_real_connect()&nbsp;err:&quot;</span><span style="color:#000000;"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;ret&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;ret;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;connect&nbsp;success!&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;endl;<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;æŸ¥è¯¢<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">char</span><span style="color:#000000;">&nbsp;*psql&nbsp;=&nbsp;</span><span style="color:#800000;">&quot;select&nbsp;*&nbsp;from&nbsp;emp&quot;</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;mysql_query(connect,&nbsp;psql);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">&nbsp;!=&nbsp;ret)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cerr&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;func&nbsp;mysql_query()&nbsp;err:&quot;</span><span style="color:#000000;"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;ret&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;ret;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;è·å–ç»“æœé›†åˆ<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MYSQL_RES&nbsp;*result&nbsp;=<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mysql_store_result(connect);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(result&nbsp;==&nbsp;</span><span style="color:#0000ff;">NULL</span><span style="color:#000000;">)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;mysql_errno(connect);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#800000;">&quot;func&nbsp;mysql_store_result()&nbsp;err:&quot;</span><span style="color:#000000;"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;ret&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;ret;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;è§£æè¡¨å¤´<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MYSQL_FILED&nbsp;*filed;<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">unsigned</span><span style="color:#000000;">&nbsp;</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;num_fields&nbsp;=<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mysql_num_fields(result);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fields&nbsp;=&nbsp;mysql_fetch_fields(result);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">for</span><span style="color:#000000;">&nbsp;(</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;i&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;&nbsp;i&nbsp;&lt;&nbsp;num_fields;&nbsp;++i)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;i&nbsp;&lt;&lt;&nbsp;fields[i].name&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;\t&quot;</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;endl;<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;è§£æç»“æœé›†åˆï¼Œä¸€è¡Œä¸€è¡Œåœ°æ£€ç´¢æ•°æ®<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MYSQL_ROW&nbsp;row&nbsp;=&nbsp;</span><span style="color:#0000ff;">NULL</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">while</span><span style="color:#000000;">&nbsp;(row&nbsp;=&nbsp;mysql_fetch_row(result))<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">for</span><span style="color:#000000;">&nbsp;(</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;i&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;&nbsp;i&nbsp;&lt;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mysql_num_fields(result);&nbsp;++i)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;row[i]&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;\t&quot;</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;é‡Šæ”¾ç»“æœé›†<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mysql_free_result(result);<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mysql_close(&amp;mysql);&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;é‡Šæ”¾å¥æŸ„<BR>
</span><span style="color:#000000;"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
}</span></div></td></tr></table></div>
<br>
<br><font color=green size = 5><a name="bc12">mysql tool å·¥å…·å¼€å‘</a></font>
<br><div style="width:100%;border:1px #e3e3e3 solid;"><div style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;border-bottom:1px solid #e3e3e3;margin-top:5px;color:#000000;">&nbsp;C++ Code&nbsp;</div><table style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;vertical-align:text-top;line-height:15px;" border="0" cellspacing="0" cellpadding="0"><tr><td style="color:#008284;background-color:#e3e3e3;vertical-align:text-top;"><div style="margin:7px;text-align:right;white-space:nowrap;"><nobr>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br>66<br>67<br>68<br>69<br>70<br>71<br>72<br>73<br>74<br>75<br>76<br>77<br>78<br>79<br>80<br>81<br>82<br>83<br>84<br>85<br>86<br>87<br>88<br>89<br>90<br>91<br>92<br>93<br>94<br>95<br>96<br>97<br>98<br>99<br>100<br>101<br>102<br>103<br>104<br>105<br>106<br>107<br>108<br>109<br>110<br>111<br>112<br>113<br>114<br>115<br>116<br>117<br>118<br>119<br>120<br>121<br>122<br>123<br>124<br>125<br>126<br>127<br></nobr></div></td><td style="background-color:#008284;padding:1px;"><div style="border:1px #008284 solid;"></div></td><td style="background-color:#efefef;width:100%;vertical-align:text-top;color:#000000;"><div style="margin:7px;"><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;iostream&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;string.h&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;mysql/mysql.h&gt;<BR>
</span><span style="color:#0000ff;">using</span><span style="color:#000000;">&nbsp;</span><span style="color:#0000ff;">namespace</span><span style="color:#000000;">&nbsp;std;<BR>
<BR>
</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;main()<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;ret,&nbsp;num&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;è·å–é”™è¯¯ç <BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MYSQL&nbsp;mysql,&nbsp;*connect&nbsp;=&nbsp;</span><span style="color:#0000ff;">NULL</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">char</span><span style="color:#000000;">&nbsp;*sqlbuf;<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;åˆå§‹åŒ–ï¼Œå»ºç«‹å¥æŸ„<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connect&nbsp;=&nbsp;mysql_init(&amp;mysql);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(</span><span style="color:#0000ff;">NULL</span><span style="color:#000000;">&nbsp;==&nbsp;connect)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;mysql_errno(&amp;mysql);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cerr&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;func&nbsp;mysql_init()&nbsp;err:&nbsp;&quot;</span><span style="color:#000000;">&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;ret&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">goto</span><span style="color:#000000;">&nbsp;END;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;mysql_init()&nbsp;success!&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;endl;<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;è¿æ¥æ•°æ®åº“<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connect&nbsp;=&nbsp;mysql_real_connect(connect,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#800000;">&quot;locahost&quot;</span><span style="color:#000000;">,&nbsp;</span><span style="color:#800000;">&quot;root&quot;</span><span style="color:#000000;">,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#800000;">&quot;20191115&quot;</span><span style="color:#000000;">,&nbsp;</span><span style="color:#800000;">&quot;mydb&quot;</span><span style="color:#000000;">,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">,&nbsp;</span><span style="color:#0000ff;">NULL</span><span style="color:#000000;">,&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(</span><span style="color:#0000ff;">NULL</span><span style="color:#000000;">&nbsp;==&nbsp;connect)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;mysql_real_connect(&amp;mysql);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cerr&nbsp;&lt;&lt;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#800000;">&quot;func&nbsp;mysql_real_connect()&nbsp;err:&quot;</span><span style="color:#000000;"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;ret&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">goto</span><span style="color:#000000;">&nbsp;END;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;connect&nbsp;success!&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;endl;<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;æ“ä½œ<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;char&nbsp;*psql&nbsp;=&nbsp;&quot;select&nbsp;*&nbsp;from&nbsp;emp&quot;;<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">while</span><span style="color:#000000;">(</span><span style="color:#ff0000;">1</span><span style="color:#000000;">)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;Please&nbsp;enter&nbsp;your&nbsp;sql:&nbsp;&quot;</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;gets(sqlbuf);<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getline(cin,&nbsp;sqlbuf);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(strncmp(sqlbuf,&nbsp;</span><span style="color:#800000;">&quot;exit&quot;</span><span style="color:#000000;">,&nbsp;</span><span style="color:#ff0000;">4</span><span style="color:#000000;">))<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">break</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;ret&nbsp;=&nbsp;mysql_query(connect,&nbsp;psql);<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜&nbsp;<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;mysql_query(connect,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#800000;">&quot;set&nbsp;names&nbsp;utf8&quot;</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">&nbsp;!=&nbsp;ret)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cerr&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;func&nbsp;mysql_query()&nbsp;err:&quot;</span><span style="color:#000000;"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;ret&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">goto</span><span style="color:#000000;">&nbsp;END;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;select<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;mysql_query(connect,&nbsp;sqlbuf);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">&nbsp;!=&nbsp;ret)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cerr&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;func&nbsp;mysql_query()&nbsp;err:&quot;</span><span style="color:#000000;"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;ret&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">goto</span><span style="color:#000000;">&nbsp;END;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(strncmp(sqlbuf,</span><span style="color:#800000;">&quot;select&quot;</span><span style="color:#000000;">,</span><span style="color:#ff0000;">6</span><span style="color:#000000;">)==</span><span style="color:#ff0000;">0</span><span style="color:#000000;">&nbsp;||<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strncmp(sqlbuf,</span><span style="color:#800000;">&quot;SELECT&quot;</span><span style="color:#000000;">,</span><span style="color:#ff0000;">6</span><span style="color:#000000;">)==</span><span style="color:#ff0000;">0</span><span style="color:#000000;">&nbsp;||<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num=mysql_filed_count(connect);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;è·å–ç»“æœé›†<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MYSQL_RES&nbsp;*result&nbsp;=&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mysql_store_result(connect);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(result&nbsp;==&nbsp;</span><span style="color:#0000ff;">NULL</span><span style="color:#000000;">)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;mysql_errno(connect);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#800000;">&quot;func&nbsp;mysql_store_result()&nbsp;err:&quot;</span><span style="color:#000000;"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;ret&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;ret;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;è§£æè¡¨å¤´<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MYSQL_FILED&nbsp;*filed;<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">unsigned</span><span style="color:#000000;">&nbsp;</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;num_fields&nbsp;=<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mysql_num_fields(result);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fields&nbsp;=&nbsp;mysql_fetch_fields(result);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">for</span><span style="color:#000000;">&nbsp;(</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;i&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;&nbsp;i&nbsp;&lt;&nbsp;num_fields;&nbsp;++i)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;i&lt;&lt;fields[i].name&lt;&lt;</span><span style="color:#800000;">&quot;\t&quot;</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;endl;<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;è§£æç»“æœé›†åˆï¼Œä¸€è¡Œä¸€è¡Œåœ°æ£€ç´¢æ•°æ®<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MYSQL_ROW&nbsp;row&nbsp;=&nbsp;</span><span style="color:#0000ff;">NULL</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">while</span><span style="color:#000000;">&nbsp;(row&nbsp;=&nbsp;mysql_fetch_row(result))<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">for</span><span style="color:#000000;">&nbsp;(</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;i&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;&nbsp;i&nbsp;&lt;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mysql_num_fields(result);&nbsp;++i)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;row[i]&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;\t&quot;</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;é‡Šæ”¾ç»“æœé›†<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mysql_free_result(result);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">else</span><span style="color:#000000;"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;éselectè¯­å¥&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<BR>
<BR>
END:<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(connect&nbsp;!=&nbsp;</span><span style="color:#0000ff;">NULL</span><span style="color:#000000;">)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mysql_close(&amp;mysql);&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;é‡Šæ”¾å¥æŸ„<BR>
</span><span style="color:#000000;"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
}</span></div></td></tr></table></div>
<br> ğŸ¬ ä¸­æ–‡ä¼šæ˜¯ä¹±ç ï¼Œéœ€è¦åœ¨æ‰§è¡ŒæŸ¥è¯¢è¯­å¥æ—¶è®¾ç½®æŸ¥è¯¢çš„å±æ€§ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯æŒ‰ç…§ç›¸åº”çš„æ ¼å¼æ˜¾ç¤º
<br>
<br><font color=green size = 5><a name="bc13">MySQL å›æ˜¾é—®é¢˜</a></font>
<br> ğŸ¬ åœ¨ä½¿ç”¨ Linux MySQL Tool é”®å…¥å‘½ä»¤çš„è¿‡ç¨‹ä¸­ï¼Œå½“æˆ‘ä»¬è¾“é”™äº†ä¸€ä¸ªå­—æ¯ï¼Œåˆ©ç”¨ Backspace é”®æƒ³è¦è¿›è¡Œåˆ é™¤æ—¶ï¼Œä¸ä½†ä¸ä¼šåˆ é™¤ï¼Œè¿˜ä¼šåœ¨åé¢å¢åŠ  `H ç¬¦å·ï¼Œè¿™ç§é—®é¢˜å°±æ˜¯MySQL Toolä¸­çš„å›æ˜¾é—®é¢˜
<br> ğŸ¬ ç¬¬ä¸€ç§è§£å†³æ–¹æ³•ï¼šåˆ©ç”¨ä¸€ä¸ªshellå‘½ä»¤ stty erase `H (æ“¦é™¤`H)ï¼Œä½¿ç”¨åå›æ˜¾é”®å°†ä¸å†æ˜¾ç¤ºï¼Œä¼šå˜æˆé€€æ ¼é”®
<br><div style="width:100%;border:1px #e3e3e3 solid;"><div style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;border-bottom:1px solid #e3e3e3;margin-top:5px;color:#000000;">&nbsp;C++ Code&nbsp;</div><table style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;vertical-align:text-top;line-height:15px;" border="0" cellspacing="0" cellpadding="0"><tr><td style="color:#008284;background-color:#e3e3e3;vertical-align:text-top;"><div style="margin:7px;text-align:right;white-space:nowrap;"><nobr>1<br>2<br>3<br>4<br></nobr></div></td><td style="background-color:#008284;padding:1px;"><div style="border:1px #008284 solid;"></div></td><td style="background-color:#efefef;width:100%;vertical-align:text-top;color:#000000;"><div style="margin:7px;"><span style="color:#8000ff;">void</span><span style="color:#000000;">&nbsp;setstty()<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;system(</span><span style="color:#800000;">&quot;stty&nbsp;erase&nbsp;`H&quot;</span><span style="color:#000000;">);<BR>
}&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;å¯ä»¥å°†æ­¤å‡½æ•°æ·»åŠ åˆ°ä¸Šé¢çš„ç¨‹åºä¸­</span></div></td></tr></table></div>
<br> ğŸ¬ ç¬¬äºŒç§è§£å†³æ–¹æ¡ˆï¼šç¼–ç¨‹ï¼Œéœ€è¦å¾ˆå¤§ä¸€ä¸ªçŸ¥è¯†é¢†åŸŸï¼Œtty APIå‡½æ•°ï¼Œå³ç»ˆç«¯ç¼–ç¨‹
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; man tcgetattr
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; man setstty2   è®¾ç½®è¾“å…¥é€€æ ¼é”®ï¼Œä¸å›æ˜¾ å‡½æ•°man pages
<br>
<br><font color=green size = 5><a name="bc14">MySQL ä¸Šä¸‹é”®é—®é¢˜</a></font>
<br> ğŸ¬ å†å¼€å‘ä¸€ä¸ªç›‘æ§è½¯ä»¶ï¼Œå°†æ¯æ¬¡é”®å…¥çš„å‘½ä»¤éƒ½ä¿å­˜ä¸‹æ¥ï¼Œåœ¨æŒ‰ä¸‹ä¸Šä¸‹é”®çš„æ—¶å€™å°†å¯¹åº”çš„å‘½ä»¤å†™è¿›å»å¹¶æ˜¾ç¤ºå°±OK
<br> ğŸ¬ åœ¨å¸‚åœºä¸Šæœ‰ä¸€ä¸ªè¿™æ ·çš„å¼€æºè½¯ä»¶ï¼šrlwrap
<br> ğŸ¬ å¦‚æœæƒ³è¦åœ¨è‡ªå·±çš„ç¨‹åºä¸­å®ç°è¿™æ ·çš„åŠŸèƒ½ï¼Œå°±å¯ä»¥å°† æ­¤è½¯ä»¶æºç  å†™è¿›è‡ªå·±çš„ç¨‹åºä¸­
<br>
<br><font color=green size = 5><a name="bc15">MySQLé¢„å¤„ç†</a></font>
<br> ğŸ¬ è®¾è®¡ç†å¿µåŠæµç¨‹
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&gt;. è¿æ¥æ•°æ®åº“ . . .
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2&gt;. mysql_stmt_init()  åˆå§‹åŒ–é¢„å¤„ç†ç¯å¢ƒå¥æŸ„ stmt
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&gt;. mysql_stmt_prepare()  å‘é¢„å¤„ç†å¥æŸ„æ·»åŠ sqlè¯­å¥ (? ? ?)
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&gt;. mysql_stmt_bind_param(stmt, bind[3])  å‘é¢„å¤„ç†å¥æŸ„ä¸­æ·»åŠ å‚æ•°å€¼
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&gt;. mysql_stmt_execute(stmt)  æ‰§è¡Œé¢„å¤„ç†çš„sqlè¯­å¥
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 6&gt;. é€‰æ‹©ç»§ç»­å‘å¥æŸ„æ·»åŠ å‚æ•°å€¼å¹¶æ‰§è¡Œè¿˜æ˜¯å‘ä¸‹æ‰§è¡Œ
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7&gt;. mysql_stmt_close(stmt)  å…³é—­é¢„å¤„ç†ç¯å¢ƒå¥æŸ„
<br> ğŸ¬ egï¼š
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œä»‹ç»äº†ä½¿ç”¨mysql_stmt_init()ã€mysql_stmt_prepare()ã€mysql_stmt_param_count()ã€mysql_stmt_bind_param()ã€mysql_stmt_execute()ã€ä»¥åŠmysql_stmt_affected_rows()åˆ›å»ºå’Œå¡«å……è¡¨çš„æ–¹æ³•ã€‚å‡å®šmysqlå˜é‡å…·æœ‰æœ‰æ•ˆçš„è¿æ¥å¥æŸ„
<br><div style="width:100%;border:1px #e3e3e3 solid;"><div style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;border-bottom:1px solid #e3e3e3;margin-top:5px;color:#000000;">&nbsp;C++ Code&nbsp;</div><table style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;vertical-align:text-top;line-height:15px;" border="0" cellspacing="0" cellpadding="0"><tr><td style="color:#008284;background-color:#e3e3e3;vertical-align:text-top;"><div style="margin:7px;text-align:right;white-space:nowrap;"><nobr>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br>66<br>67<br>68<br>69<br>70<br>71<br>72<br>73<br>74<br>75<br>76<br>77<br>78<br>79<br>80<br>81<br>82<br>83<br>84<br>85<br>86<br>87<br>88<br>89<br>90<br>91<br>92<br>93<br>94<br>95<br>96<br>97<br>98<br>99<br>100<br>101<br>102<br>103<br>104<br>105<br>106<br>107<br>108<br>109<br>110<br>111<br>112<br>113<br>114<br>115<br>116<br>117<br>118<br>119<br>120<br>121<br>122<br>123<br>124<br>125<br>126<br>127<br>128<br>129<br>130<br>131<br>132<br>133<br>134<br>135<br>136<br>137<br>138<br>139<br>140<br>141<br>142<br>143<br>144<br>145<br>146<br>147<br>148<br>149<br>150<br>151<br>152<br>153<br>154<br>155<br>156<br>157<br>158<br>159<br>160<br>161<br>162<br>163<br>164<br>165<br>166<br>167<br>168<br>169<br>170<br>171<br>172<br>173<br>174<br>175<br>176<br>177<br>178<br>179<br>180<br></nobr></div></td><td style="background-color:#008284;padding:1px;"><div style="border:1px #008284 solid;"></div></td><td style="background-color:#efefef;width:100%;vertical-align:text-top;color:#000000;"><div style="margin:7px;"><span style="color:#0000ff;">#define</span><span style="color:#000000;">&nbsp;STRING_SIZE&nbsp;</span><span style="color:#ff0000;">50</span><span style="color:#000000;"><BR>
<BR>
</span><span style="color:#0000ff;">#define</span><span style="color:#000000;">&nbsp;DROP_SAMPLE_TABLE&nbsp;</span><span style="color:#800000;">&quot;DROP&nbsp;TABLE&nbsp;IF&nbsp;EXISTS<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test_table</span><span style="color:#800000;">&quot;<BR>
</span><span style="color:#0000ff;">#define</span><span style="color:#000000;">&nbsp;CREATE_SAMPLE_TABLE&nbsp;</span><span style="color:#800000;">&quot;CREATE&nbsp;TABLE&nbsp;<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test_table(col1&nbsp;INT,\ <BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col2&nbsp;VARCHAR(</span><span style="color:#ff0000;">40</span><span style="color:#000000;">),\ <BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col3&nbsp;SMALLINT,\ <BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col4&nbsp;TIMESTAMP)</span><span style="color:#800000;">&quot;<BR>
</span><span style="color:#0000ff;">#define</span><span style="color:#000000;">&nbsp;INSERT_SAMPLE&nbsp;</span><span style="color:#800000;">&quot;INSERT&nbsp;INTO&nbsp;<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;test_table(col1,col2,col3)&nbsp;VALUES(?,?,?)</span><span style="color:#800000;">&quot;<BR>
</span><span style="color:#000000;"><BR>
MYSQL_STMT&nbsp;&nbsp;&nbsp;&nbsp;*stmt;<BR>
MYSQL_BIND&nbsp;&nbsp;&nbsp;&nbsp;bind[</span><span style="color:#ff0000;">3</span><span style="color:#000000;">];<BR>
my_ulonglong&nbsp;&nbsp;affected_rows;<BR>
</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;param_count;<BR>
</span><span style="color:#8000ff;">short</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;small_data;<BR>
</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int_data;<BR>
</span><span style="color:#8000ff;">char</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str_data[STRING_SIZE];<BR>
</span><span style="color:#8000ff;">unsigned</span><span style="color:#000000;">&nbsp;</span><span style="color:#8000ff;">long</span><span style="color:#000000;">&nbsp;str_length;<BR>
my_bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is_null;<BR>
<BR>
</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(mysql_query(mysql,&nbsp;DROP_SAMPLE_TABLE))<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,</span><span style="color:#800000;">&quot;DROP&nbsp;TABLE&nbsp;failed\n&quot;</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,</span><span style="color:#800000;">&quot;%s\n&quot;</span><span style="color:#000000;">,mysql_error(mysql));<BR>
&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">);<BR>
}<BR>
<BR>
</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(mysql_query(mysql,&nbsp;CREATE_SAMPLE_TABLE))<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,</span><span style="color:#800000;">&quot;CREATE&nbsp;TABLE&nbsp;failed\n&quot;</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,</span><span style="color:#800000;">&quot;%s\n&quot;</span><span style="color:#000000;">,&nbsp;mysql_error(mysql));<BR>
&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">);<BR>
}<BR>
<BR>
</span><span style="color:#008000;">/*&nbsp;Prepare&nbsp;an&nbsp;INSERT&nbsp;query&nbsp;with&nbsp;3&nbsp;parameters&nbsp;*/</span><span style="color:#000000;"><BR>
</span><span style="color:#008000;">/*(the&nbsp;TIMESTAMP&nbsp;column&nbsp;is&nbsp;not&nbsp;named;the&nbsp;server&nbsp;*/</span><span style="color:#000000;"><BR>
</span><span style="color:#008000;">/*&nbsp;&nbsp;sets&nbsp;it&nbsp;to&nbsp;the&nbsp;current&nbsp;date&nbsp;and&nbsp;time)&nbsp;*/</span><span style="color:#000000;"><BR>
stmt&nbsp;=&nbsp;mysql_stmt_init(mysql);<BR>
</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(!stmt)<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,&nbsp;</span><span style="color:#800000;">&quot;&nbsp;mysql_stmt_init(),<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out&nbsp;of&nbsp;memory\n</span><span style="color:#800000;">&quot;);<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">);<BR>
}<BR>
</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(mysql_stmt_prepare(stmt,&nbsp;INSERT_SAMPLE,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strlen(INSERT_SAMPLE)))<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,&nbsp;</span><span style="color:#800000;">&quot;&nbsp;mysql_stmt_prepare(),<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;INSERT&nbsp;failed\n</span><span style="color:#800000;">&quot;);<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,&nbsp;</span><span style="color:#800000;">&quot;&nbsp;%s\n&quot;</span><span style="color:#000000;">,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mysql_stmt_error(stmt));<BR>
&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">);<BR>
}<BR>
fprintf(stdout,&nbsp;</span><span style="color:#800000;">&quot;&nbsp;prepare,&nbsp;INSERT&nbsp;successful\n&quot;</span><span style="color:#000000;">);<BR>
<BR>
</span><span style="color:#008000;">/*&nbsp;Get&nbsp;the&nbsp;parameter&nbsp;count&nbsp;from&nbsp;the&nbsp;statement&nbsp;*/</span><span style="color:#000000;"><BR>
param_count&nbsp;=&nbsp;mysql_stmt_param_count(stmt);<BR>
fprintf(stdout,&nbsp;</span><span style="color:#800000;">&quot;&nbsp;total&nbsp;parameters&nbsp;in&nbsp;INSERT:&nbsp;<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%d\n</span><span style="color:#800000;">&quot;,&nbsp;param_count);<BR>
</span><span style="color:#000000;"><BR>
</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(param_count&nbsp;!=&nbsp;</span><span style="color:#ff0000;">3</span><span style="color:#000000;">)&nbsp;<BR>
</span><span style="color:#008000;">/*&nbsp;validate&nbsp;parameter&nbsp;count&nbsp;*/</span><span style="color:#000000;"><BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,&nbsp;</span><span style="color:#800000;">&quot;&nbsp;invalid&nbsp;parameter&nbsp;count<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returned&nbsp;by&nbsp;MySQL\n</span><span style="color:#800000;">&quot;);<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">);<BR>
}<BR>
<BR>
</span><span style="color:#008000;">/*&nbsp;Bind&nbsp;the&nbsp;data&nbsp;for&nbsp;all&nbsp;3&nbsp;parameters&nbsp;*/</span><span style="color:#000000;"><BR>
<BR>
memset(bind,&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">,&nbsp;</span><span style="color:#0000ff;">sizeof</span><span style="color:#000000;">(bind));<BR>
<BR>
</span><span style="color:#008000;">/*&nbsp;INTEGER&nbsp;PARAM&nbsp;*/</span><span style="color:#000000;"><BR>
</span><span style="color:#008000;">/*&nbsp;This&nbsp;is&nbsp;a&nbsp;number&nbsp;type,&nbsp;so&nbsp;there&nbsp;is&nbsp;no<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;need&nbsp;to&nbsp;specify&nbsp;buffer_length&nbsp;*/</span><span style="color:#000000;"><BR>
bind[</span><span style="color:#ff0000;">0</span><span style="color:#000000;">].buffer_type&nbsp;=&nbsp;MYSQL_TYPE_LONG;<BR>
bind[</span><span style="color:#ff0000;">0</span><span style="color:#000000;">].buffer&nbsp;=&nbsp;(</span><span style="color:#8000ff;">char</span><span style="color:#000000;">&nbsp;*)&nbsp;&amp;int_data;<BR>
bind[</span><span style="color:#ff0000;">0</span><span style="color:#000000;">].is_null&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
bind[</span><span style="color:#ff0000;">0</span><span style="color:#000000;">].length&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
<BR>
</span><span style="color:#008000;">/*&nbsp;STRING&nbsp;PARAM&nbsp;*/</span><span style="color:#000000;"><BR>
bind[</span><span style="color:#ff0000;">1</span><span style="color:#000000;">].buffer_type&nbsp;=&nbsp;MYSQL_TYPE_STRING;<BR>
bind[</span><span style="color:#ff0000;">1</span><span style="color:#000000;">].buffer&nbsp;=&nbsp;(</span><span style="color:#8000ff;">char</span><span style="color:#000000;">&nbsp;*)str_data;<BR>
bind[</span><span style="color:#ff0000;">1</span><span style="color:#000000;">].buffer_length&nbsp;=&nbsp;STRING_SIZE;<BR>
bind[</span><span style="color:#ff0000;">1</span><span style="color:#000000;">].is_null&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
bind[</span><span style="color:#ff0000;">1</span><span style="color:#000000;">].length&nbsp;=&nbsp;&amp;str_length;<BR>
<BR>
</span><span style="color:#008000;">/*&nbsp;SMALLINT&nbsp;PARAM&nbsp;*/</span><span style="color:#000000;"><BR>
bind[</span><span style="color:#ff0000;">2</span><span style="color:#000000;">].buffer_type&nbsp;=&nbsp;MYSQL_TYPE_SHORT;<BR>
bind[</span><span style="color:#ff0000;">2</span><span style="color:#000000;">].buffer&nbsp;=&nbsp;(</span><span style="color:#8000ff;">char</span><span style="color:#000000;">&nbsp;*)&nbsp;&amp;small_data;<BR>
bind[</span><span style="color:#ff0000;">2</span><span style="color:#000000;">].is_null&nbsp;=&nbsp;&amp;is_null;<BR>
bind[</span><span style="color:#ff0000;">2</span><span style="color:#000000;">].length&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
<BR>
</span><span style="color:#008000;">/*&nbsp;Bind&nbsp;the&nbsp;buffers&nbsp;*/</span><span style="color:#000000;"><BR>
</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(mysql_stmt_bind_param(stmt,&nbsp;bind))<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,&nbsp;</span><span style="color:#800000;">&quot;&nbsp;mysql_stmt_bind_param()<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;failed\n</span><span style="color:#800000;">&quot;);<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,&nbsp;</span><span style="color:#800000;">&quot;&nbsp;%s\n&quot;</span><span style="color:#000000;">,&nbsp;mysql_stmt_error<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stmt));<BR>
&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">);<BR>
}<BR>
<BR>
</span><span style="color:#008000;">/*&nbsp;Specify&nbsp;the&nbsp;data&nbsp;values&nbsp;for&nbsp;the&nbsp;first&nbsp;row&nbsp;*/</span><span style="color:#000000;"><BR>
int_data&nbsp;=&nbsp;</span><span style="color:#ff0000;">10</span><span style="color:#000000;">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">/*&nbsp;integer&nbsp;*/</span><span style="color:#000000;"><BR>
strncpy(str_data,&nbsp;</span><span style="color:#800000;">&quot;MySQL&quot;</span><span style="color:#000000;">,&nbsp;STRING_SIZE);&nbsp;</span><span style="color:#008000;">/*<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;string&nbsp;&nbsp;*/</span><span style="color:#000000;"><BR>
str_length&nbsp;=&nbsp;strlen(str_data);<BR>
<BR>
</span><span style="color:#008000;">/*&nbsp;INSERT&nbsp;SMALLINT&nbsp;data&nbsp;as&nbsp;NULL&nbsp;*/</span><span style="color:#000000;"><BR>
is_null&nbsp;=&nbsp;</span><span style="color:#ff0000;">1</span><span style="color:#000000;">;<BR>
<BR>
</span><span style="color:#008000;">/*&nbsp;Execute&nbsp;the&nbsp;INSERT&nbsp;statement&nbsp;-&nbsp;1*/</span><span style="color:#000000;"><BR>
</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(mysql_stmt_execute(stmt))<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,&nbsp;</span><span style="color:#800000;">&quot;&nbsp;mysql_stmt_execute(),<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#ff0000;">1</span><span style="color:#000000;">&nbsp;failed\n</span><span style="color:#800000;">&quot;);<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,&nbsp;</span><span style="color:#800000;">&quot;&nbsp;%s\n&quot;</span><span style="color:#000000;">,&nbsp;mysql_stmt_error<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stmt));<BR>
&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">);<BR>
}<BR>
<BR>
</span><span style="color:#008000;">/*&nbsp;Get&nbsp;the&nbsp;total&nbsp;number&nbsp;of&nbsp;affected&nbsp;rows&nbsp;*/</span><span style="color:#000000;"><BR>
affected_rows&nbsp;=&nbsp;mysql_stmt_affected_rows(stmt);<BR>
fprintf(stdout,&nbsp;</span><span style="color:#800000;">&quot;&nbsp;total&nbsp;affected&nbsp;rows(insert&nbsp;1)<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;%lu\n</span><span style="color:#800000;">&quot;,<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span style="color:#8000ff;">unsigned</span><span style="color:#000000;">&nbsp;</span><span style="color:#8000ff;">long</span><span style="color:#000000;">)&nbsp;affected_rows);<BR>
<BR>
</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(affected_rows&nbsp;!=&nbsp;</span><span style="color:#ff0000;">1</span><span style="color:#000000;">)&nbsp;</span><span style="color:#008000;">/*&nbsp;validate&nbsp;affected<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rows&nbsp;*/</span><span style="color:#000000;"><BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,&nbsp;</span><span style="color:#800000;">&quot;&nbsp;invalid&nbsp;affected&nbsp;rows<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;MySQL\n</span><span style="color:#800000;">&quot;);<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">);<BR>
}<BR>
<BR>
</span><span style="color:#008000;">/*&nbsp;Specify&nbsp;data&nbsp;values&nbsp;for&nbsp;second&nbsp;row,&nbsp;then<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re-execute&nbsp;the&nbsp;statement&nbsp;*/</span><span style="color:#000000;"><BR>
int_data&nbsp;=&nbsp;</span><span style="color:#ff0000;">1000</span><span style="color:#000000;">;<BR>
strncpy(str_data,&nbsp;</span><span style="color:#800000;">&quot;The&nbsp;most&nbsp;popular&nbsp;Open<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Source&nbsp;database</span><span style="color:#800000;">&quot;,&nbsp;STRING_SIZE);<BR>
</span><span style="color:#000000;">str_length&nbsp;=&nbsp;strlen(str_data);<BR>
small_data&nbsp;=&nbsp;</span><span style="color:#ff0000;">1000</span><span style="color:#000000;">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">/*&nbsp;smallint&nbsp;*/</span><span style="color:#000000;"><BR>
is_null&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">/*&nbsp;reset&nbsp;*/</span><span style="color:#000000;"><BR>
<BR>
</span><span style="color:#008000;">/*&nbsp;Execute&nbsp;the&nbsp;INSERT&nbsp;statement&nbsp;-&nbsp;2*/</span><span style="color:#000000;"><BR>
</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(mysql_stmt_execute(stmt))<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,&nbsp;</span><span style="color:#800000;">&quot;&nbsp;mysql_stmt_execute,<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#ff0000;">2</span><span style="color:#000000;">&nbsp;failed\n</span><span style="color:#800000;">&quot;);<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,&nbsp;</span><span style="color:#800000;">&quot;&nbsp;%s\n&quot;</span><span style="color:#000000;">,&nbsp;mysql_stmt_error<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stmt));<BR>
&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">);<BR>
}<BR>
<BR>
</span><span style="color:#008000;">/*&nbsp;Get&nbsp;the&nbsp;total&nbsp;rows&nbsp;affected&nbsp;*/</span><span style="color:#000000;"><BR>
affected_rows&nbsp;=&nbsp;mysql_stmt_affected_rows(stmt);<BR>
fprintf(stdout,&nbsp;</span><span style="color:#800000;">&quot;&nbsp;total&nbsp;affected&nbsp;rows(insert&nbsp;2)<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;%lu\n</span><span style="color:#800000;">&quot;,<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span style="color:#8000ff;">unsigned</span><span style="color:#000000;">&nbsp;</span><span style="color:#8000ff;">long</span><span style="color:#000000;">)&nbsp;affected_rows);<BR>
<BR>
</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(affected_rows&nbsp;!=&nbsp;</span><span style="color:#ff0000;">1</span><span style="color:#000000;">)&nbsp;</span><span style="color:#008000;">/*&nbsp;validate&nbsp;affected<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rows&nbsp;*/</span><span style="color:#000000;"><BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,&nbsp;</span><span style="color:#800000;">&quot;&nbsp;invalid&nbsp;affected&nbsp;rows&nbsp;<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;MySQL\n</span><span style="color:#800000;">&quot;);<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">);<BR>
}<BR>
<BR>
</span><span style="color:#008000;">/*&nbsp;Close&nbsp;the&nbsp;statement&nbsp;*/</span><span style="color:#000000;"><BR>
</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(mysql_stmt_close(stmt))<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,&nbsp;</span><span style="color:#800000;">&quot;&nbsp;failed&nbsp;while&nbsp;closing&nbsp;<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;statement\n</span><span style="color:#800000;">&quot;);<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,&nbsp;</span><span style="color:#800000;">&quot;&nbsp;%s\n&quot;</span><span style="color:#000000;">,&nbsp;mysql_stmt_error<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stmt));<BR>
&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">);<BR>
}</span></div></td></tr></table></div>
<br> ğŸ¬ æ³¨é‡Šï¼šå…³äºä½¿ç”¨é¢„å¤„ç†è¯­å¥å‡½æ•°çš„å®Œæ•´ç¤ºä¾‹ï¼Œè¯·å‚è§æ–‡ä»¶tests/mysql_client_test.cã€‚è¯¥æ–‡ä»¶å¯ä»MySQLæºç åˆ†å‘ç‰ˆè·å¾—ï¼Œæˆ–ä»BitKeeperæºç ä»“åº“è·å¾—
<br>
<br><font color=green size = 5><a name="bc16">MySQLæ—¶é—´ç±»</a></font>
<br> MYSQL_TIME
<br> ğŸ¬ åŸå‹
<br><div style="width:100%;border:1px #e3e3e3 solid;"><div style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;border-bottom:1px solid #e3e3e3;margin-top:5px;color:#000000;">&nbsp;C++ Code&nbsp;</div><table style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;vertical-align:text-top;line-height:15px;" border="0" cellspacing="0" cellpadding="0"><tr><td style="color:#008284;background-color:#e3e3e3;vertical-align:text-top;"><div style="margin:7px;text-align:right;white-space:nowrap;"><nobr>1<br>2<br>3<br>4<br>5<br>6<br>7<br></nobr></div></td><td style="background-color:#008284;padding:1px;"><div style="border:1px #008284 solid;"></div></td><td style="background-color:#efefef;width:100%;vertical-align:text-top;color:#000000;"><div style="margin:7px;"><span style="color:#0000ff;">typedef</span><span style="color:#000000;">&nbsp;</span><span style="color:#0000ff;">struct</span><span style="color:#000000;">&nbsp;st_mysql_time<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">unsigned</span><span style="color:#000000;">&nbsp;</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;year,&nbsp;month,&nbsp;day,&nbsp;hour,&nbsp;minute,&nbsp;second;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">unsigned</span><span style="color:#000000;">&nbsp;</span><span style="color:#8000ff;">long</span><span style="color:#000000;">&nbsp;second_part;&nbsp;&nbsp;</span><span style="color:#008000;">/*&nbsp;microseconds&nbsp;*/</span><span style="color:#000000;"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;my_bool&nbsp;msg;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">enum</span><span style="color:#000000;">&nbsp;enum_mysql_timestamp_type&nbsp;time_type;<BR>
}&nbsp;MYSQL_TIME;</span></div></td></tr></table></div>
<br> ğŸ¬ æ—¢å¯ä»¥é€šè¿‡ SQL è¯­å¥è¿›è¡Œæ—¶é—´å­˜å–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ é¢„å¤„ç† è¯­å¥è¿›è¡Œå­˜å–
<br> ğŸ¬ é¢„å¤„ç†ç¯å¢ƒå˜é‡å¯ä»¥ èŠ‚çœç½‘ç»œæµé‡
<br> ğŸ¬ egï¼š
<br><div style="width:100%;border:1px #e3e3e3 solid;"><div style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;border-bottom:1px solid #e3e3e3;margin-top:5px;color:#000000;">&nbsp;C++ Code&nbsp;</div><table style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;vertical-align:text-top;line-height:15px;" border="0" cellspacing="0" cellpadding="0"><tr><td style="color:#008284;background-color:#e3e3e3;vertical-align:text-top;"><div style="margin:7px;text-align:right;white-space:nowrap;"><nobr>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br>66<br>67<br>68<br>69<br>70<br>71<br>72<br>73<br>74<br>75<br>76<br>77<br>78<br>79<br>80<br></nobr></div></td><td style="background-color:#008284;padding:1px;"><div style="border:1px #008284 solid;"></div></td><td style="background-color:#efefef;width:100%;vertical-align:text-top;color:#000000;"><div style="margin:7px;"><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;iostream&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;stdlib.h&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;string.h&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;errno.h&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;termios.h&gt;<BR>
</span><span style="color:#0000ff;">#include</span><span style="color:#000000;">&nbsp;&lt;mysql/mysql.h&gt;<BR>
</span><span style="color:#0000ff;">using</span><span style="color:#000000;">&nbsp;</span><span style="color:#0000ff;">namespace</span><span style="color:#000000;">&nbsp;std;<BR>
<BR>
</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;main()<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;ret&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">,&nbsp;status&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;MYSQL&nbsp;*mysql;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;MYSQL_RES&nbsp;*result;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;mysql&nbsp;=&nbsp;mysql_init(</span><span style="color:#0000ff;">NULL</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;mysql&nbsp;=&nbsp;mysql_real_connect(mysql,&nbsp;</span><span style="color:#800000;">&quot;locahost&quot;</span><span style="color:#000000;">,&nbsp;</span><span style="color:#800000;">&quot;root&quot;</span><span style="color:#000000;">,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#800000;">&quot;123456&quot;</span><span style="color:#000000;">,&nbsp;</span><span style="color:#800000;">&quot;mydb&quot;</span><span style="color:#000000;">,&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">,&nbsp;</span><span style="color:#0000ff;">NULL</span><span style="color:#000000;">,&nbsp;CLIENT_MULTI_STATEMENTS);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(mysql&nbsp;==&nbsp;</span><span style="color:#0000ff;">NULL</span><span style="color:#000000;">)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;mysql_errno(mysql);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;mysql_error&nbsp;&quot;</span><span style="color:#000000;">&lt;&lt;&nbsp;mysql_error(mysql)&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;func&nbsp;mysql_real_connect()&nbsp;&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;ret&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;ret;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">else</span><span style="color:#000000;"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;OK&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;MYSQL_TIME&nbsp;ts;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;MYSQL_BIND&nbsp;bind[</span><span style="color:#ff0000;">3</span><span style="color:#000000;">];<BR>
&nbsp;&nbsp;&nbsp;&nbsp;MYSQL_STMT&nbsp;*stmt;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">char</span><span style="color:#000000;">&nbsp;query[</span><span style="color:#ff0000;">1024</span><span style="color:#000000;">]&nbsp;=&nbsp;</span><span style="color:#800000;">&quot;INSERT&nbsp;INTO&nbsp;test&nbsp;VALUES(date_field&nbsp;date,<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time_field&nbsp;time,&nbsp;timestamp_field&nbsp;timestamp)</span><span style="color:#800000;">&quot;;<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;stmt&nbsp;=&nbsp;mysql_stmt_init(mysql);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(!stmt)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cerr&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;mysql_stmt_init()&nbsp;error&nbsp;&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;error&nbsp;:&nbsp;&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;mysql_stmt_error(stmt)&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(mysql_stmt_prepare(stmt,&nbsp;query,&nbsp;strlen(query)))<BR>
&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cerr&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;mysql_stme_prepare&nbsp;error&nbsp;&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;error&nbsp;:&nbsp;&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;mysql_stmt_error(stmt)&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;bind[</span><span style="color:#ff0000;">0</span><span style="color:#000000;">].buffer_type=&nbsp;MYSQL_TYPE_DATE;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;bind[</span><span style="color:#ff0000;">0</span><span style="color:#000000;">].buffer=&nbsp;(</span><span style="color:#8000ff;">char</span><span style="color:#000000;">&nbsp;*)&ts;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;bind[</span><span style="color:#ff0000;">0</span><span style="color:#000000;">].is_null=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;bind[</span><span style="color:#ff0000;">0</span><span style="color:#000000;">].length=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;bind[</span><span style="color:#ff0000;">1</span><span style="color:#000000;">]&nbsp;=&nbsp;bind[</span><span style="color:#ff0000;">2</span><span style="color:#000000;">]&nbsp;=&nbsp;bind[</span><span style="color:#ff0000;">0</span><span style="color:#000000;">];<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;mysql_stmt_bind_param(stmt,&nbsp;bind);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;ts.year&nbsp;=&nbsp;</span><span style="color:#ff0000;">2050</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;ts.month&nbsp;=&nbsp;</span><span style="color:#ff0000;">02</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;ts.day&nbsp;=&nbsp;</span><span style="color:#ff0000;">03</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;ts.hour&nbsp;=&nbsp;</span><span style="color:#ff0000;">10</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;ts.minute&nbsp;=&nbsp;</span><span style="color:#ff0000;">45</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;ts.second&nbsp;=&nbsp;</span><span style="color:#ff0000;">20</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;mysql_stmt_execute(stmt);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(mysql_stmt_close(stmt))<BR>
&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cerr&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;failed&nbsp;while&nbsp;closeing&nbsp;the&nbsp;statement&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cerr&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;error&nbsp;:&nbsp;&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;mysql_stmt_error(stmt)&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;mysql_close(mysql);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
}</span></div></td></tr></table></div>
<br>
<br><font color=green size = 5><a name="bc17">å¤šæŸ¥è¯¢æ‰§è¡Œçš„ C API å¤„ç† (multsql)</a></font>
<br> ğŸ¬ æ”¯æŒåœ¨å•ä¸ªå­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„å¤šè¯­å¥çš„æ‰§è¡Œï¼Œè¦æƒ³ä¸ç»™å®šçš„è¿æ¥ä¸€èµ·ä½¿ç”¨è¯¥åŠŸèƒ½ï¼Œæ‰“å¼€è¿æ¥æ—¶ï¼Œå¿…é¡»å°†æ ‡å¿—å‚æ•°ä¸­çš„ CLIENT_MULTI_STATEMENTS é€‰é¡¹æŒ‡å®šç»™ mysql_real_connect()ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨ mysql_set_server_option(MYSQL_MULTI_STATEMENTS_ON)ï¼Œä¸ºå·²æœ‰çš„è¿æ¥è®¾ç½®å®ƒ
<br><div style="width:100%;border:1px #e3e3e3 solid;"><div style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;border-bottom:1px solid #e3e3e3;margin-top:5px;color:#000000;">&nbsp;C++ Code&nbsp;</div><table style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;vertical-align:text-top;line-height:15px;" border="0" cellspacing="0" cellpadding="0"><tr><td style="color:#008284;background-color:#e3e3e3;vertical-align:text-top;"><div style="margin:7px;text-align:right;white-space:nowrap;"><nobr>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br></nobr></div></td><td style="background-color:#008284;padding:1px;"><div style="border:1px #008284 solid;"></div></td><td style="background-color:#efefef;width:100%;vertical-align:text-top;color:#000000;"><div style="margin:7px;"><span style="color:#008000;">/*&nbsp;Connect&nbsp;to&nbsp;server&nbsp;with&nbsp;option&nbsp;CLIENT_MULTI_STATEMENTS&nbsp;*/</span><span style="color:#000000;"><BR>
mysql_real_connect(...,&nbsp;CLIENT_MULTI_STATEMENTS);<BR>
<BR>
</span><span style="color:#008000;">/*&nbsp;Now&nbsp;execute&nbsp;multiple&nbsp;queries&nbsp;*/</span><span style="color:#000000;"><BR>
mysql_query(mysql,&nbsp;</span><span style="color:#800000;">&quot;DROP&nbsp;TABLE&nbsp;IF&nbsp;EXISTS&nbsp;test_table;\ <BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CREATE&nbsp;TABLE&nbsp;test_table(id&nbsp;INT);\ <BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;INSERT&nbsp;INTO&nbsp;test_table&nbsp;VALUES(</span><span style="color:#ff0000;">10</span><span style="color:#000000;">);\ <BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UPDATE&nbsp;test_table&nbsp;SET&nbsp;id=</span><span style="color:#ff0000;">20</span><span style="color:#000000;">&nbsp;WHERE&nbsp;id=</span><span style="color:#ff0000;">10</span><span style="color:#000000;">;\ <BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SELECT&nbsp;*&nbsp;FROM&nbsp;test_table;\ <BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DROP&nbsp;TABLE&nbsp;test_table</span><span style="color:#800000;">&quot;);<BR>
</span><span style="color:#0000ff;">do</span><span style="color:#000000;"><BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">/*&nbsp;Process&nbsp;all&nbsp;results&nbsp;*/</span><span style="color:#000000;"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;...<BR>
&nbsp;&nbsp;&nbsp;&nbsp;printf(</span><span style="color:#800000;">&quot;total&nbsp;affected&nbsp;rows:&nbsp;%lld&quot;</span><span style="color:#000000;">,&nbsp;mysql_affected_rows(mysql));<BR>
&nbsp;&nbsp;&nbsp;&nbsp;...<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(!(result&nbsp;=&nbsp;mysql_store_result(mysql)))<BR>
&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(stderr,&nbsp;</span><span style="color:#800000;">&quot;Got&nbsp;fatal&nbsp;error&nbsp;processing&nbsp;query\n&quot;</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color:#ff0000;">1</span><span style="color:#000000;">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;process_result_set(result);&nbsp;</span><span style="color:#008000;">/*&nbsp;client&nbsp;function&nbsp;*/</span><span style="color:#000000;"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;mysql_free_result(result);<BR>
}<BR>
</span><span style="color:#0000ff;">while</span><span style="color:#000000;">&nbsp;(!mysql_next_result(mysql));</span></div></td></tr></table></div>
<br>
<br><font color=green size = 5><a name="bc18">MySQLçš„äº‹åŠ¡</a></font>
<br> ğŸ¬ äº‹åŠ¡çš„æ¦‚å¿µåŒ Oracle æ•°æ®åº“ä¸­çš„äº‹åŠ¡
<br> ğŸ¬ ä½†ä¹Ÿæœ‰ä¸€äº›å·®åˆ«ï¼šMySQLçš„äº‹åŠ¡åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯è‡ªåŠ¨æäº¤ï¼Œå³ä¸€æ¡è¯­å¥å³æäº¤
<br> ğŸ¬ å°† MySQL äº‹åŠ¡è®¾ç½®ä¸ºåŒ Oracleæ•°æ®åº“ ä¸€æ · æ‰‹åŠ¨æäº¤ï¼šè‡ªåˆ¶å‡½æ•°
<br><div style="width:100%;border:1px #e3e3e3 solid;"><div style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;border-bottom:1px solid #e3e3e3;margin-top:5px;color:#000000;">&nbsp;C++ Code&nbsp;</div><table style="width:100%;font-family:'Consolas', 'Courier New';font-size:12px;vertical-align:text-top;line-height:15px;" border="0" cellspacing="0" cellpadding="0"><tr><td style="color:#008284;background-color:#e3e3e3;vertical-align:text-top;"><div style="margin:7px;text-align:right;white-space:nowrap;"><nobr>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br>66<br></nobr></div></td><td style="background-color:#008284;padding:1px;"><div style="border:1px #008284 solid;"></div></td><td style="background-color:#efefef;width:100%;vertical-align:text-top;color:#000000;"><div style="margin:7px;"><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;mysql_BeginTram(MYSQL&nbsp;*mysql)<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;ret&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;æ‰§è¡Œäº‹åŠ¡å¼€å§‹SQL&nbsp;(å¼€å¯äº‹åŠ¡)<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;mysql_query(mysql,&nbsp;BEGIN_TRAM)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">&nbsp;!=&nbsp;ret)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;func&nbsp;mysql_query()&nbsp;err&nbsp;:&nbsp;&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;ret&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;ret;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;è®¾ç½®äº‹åŠ¡æ‰‹åŠ¨æäº¤<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;mysql_query(mysql,&nbsp;SET_TRAM);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">&nbsp;!=&nbsp;ret)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;func&nbsp;mysql_query()&nbsp;err&nbsp;:&nbsp;&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;ret&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;ret;<BR>
}<BR>
<BR>
</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;mysql_Commit(MYSQL&nbsp;*mysql)<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;ret&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;æ‰§è¡Œäº‹åŠ¡æäº¤SQL<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;mysql_query(mysql,&nbsp;COMMIT_TRAM);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">&nbsp;!=&nbsp;ret)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;func&nbsp;mysql_query()&nbsp;err&nbsp;:&nbsp;&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;ret&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;ret;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;æ¢å¤è‡ªåŠ¨æäº¤è®¾ç½®<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;mysql_query(mysql,&nbsp;UNSET_TRAM);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">&nbsp;!=&nbsp;ret)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;func&nbsp;mysql_query()&nbsp;err&nbsp;:&nbsp;&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;ret&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;ret;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;ret;<BR>
}<BR>
</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;mysql_Rollback(MYSQL&nbsp;*mysql)<BR>
{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#8000ff;">int</span><span style="color:#000000;">&nbsp;ret&nbsp;=&nbsp;</span><span style="color:#ff0000;">0</span><span style="color:#000000;">;<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;äº‹åŠ¡å›æ»šæ“ä½œ<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;mysql_query(mysql,&nbsp;ROLLBACK_TRAM);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">&nbsp;!=&nbsp;ret)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;func&nbsp;mysql_query()&nbsp;err&nbsp;:&nbsp;&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;ret&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;ret;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008000;">//&nbsp;æ¢å¤è‡ªåŠ¨æäº¤è®¾ç½®<BR>
</span><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;mysql_query(mysql,&nbsp;UNSET_TRAM);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">if</span><span style="color:#000000;">&nbsp;(</span><span style="color:#ff0000;">0</span><span style="color:#000000;">&nbsp;!=&nbsp;ret)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;</span><span style="color:#800000;">&quot;func&nbsp;mysql_query()&nbsp;err&nbsp;:&nbsp;&quot;</span><span style="color:#000000;">&nbsp;&lt;&lt;&nbsp;ret&nbsp;&lt;&lt;&nbsp;endl;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;ret;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#0000ff;">return</span><span style="color:#000000;">&nbsp;ret;<BR>
}</span></div></td></tr></table></div></p>

<p><br><br><br>
<font color = gray size = 3>å¦‚æœ‰é”™è¯¯ï¼Œæ¬¢è¿æŒ‡æ­£ï¼</font></p></div>
        <div class="post_footer">
          
          <div class="meta">
            <div class="info">
              <span class="field tags">
                <i class="remixicon-stack-line"></i>
                
                <a href="https://oubc.github.io/tags/db/">DB</a>
                
              </span>
            </div>
          </div>
          
        </div>
      </div>
      
      
    </div>
  </div>
  <a id="back_to_top" href="#" class="back_to_top"><span>â–³</span></a>
</div>
<footer class="footer">
  <div class="powered_by">
    <a href="https://wxt.sinaimg.cn/thumb300/007Diza3ly1g4l9lmg4aog3074074gnf.gif?tags=%5B%5D">I </a>
	<a href="">love</a>
    <a href="https://wxt.sinaimg.cn/thumb300/007Diza3ly1g4l9lmfm2eg306o06o74u.gif?tags=%5B%5D"> you </a>
    <a href="https://wxt.sinaimg.cn/thumb300/007Diza3ly1g4njrx4tpcj30fn0bq3zg.jpg?tags=%5B%5D">three </a>
	<a href="https://wxt.sinaimg.cn/thumb300/007Diza3ly1g4njrx64ctg307s07swfy.gif?tags=%5B%5D">thousand</a>
    <a href="https://www.kugou.com/song/#hash=96426C78381DE98DC31A5846FC274CBF&album_id=646623"> times.</a>
  </div>

  <div class="footer_slogan">
    <span>å®¶åº­ã€æ¢¦æƒ³ã€å†…å¿ƒçš„å¹³é™</span>
  </div>
</footer>



<script src="https://oubc.github.io/js/jquery-3.3.1.min.js"></script>
<script src="https://oubc.github.io/js/zozo.js"></script>
<script src="https://oubc.github.io/js/highlight.pack.js"></script>
<link  href="https://oubc.github.io/css/fancybox.min.css" rel="stylesheet">
<script src="https://oubc.github.io/js/fancybox.min.js"></script>

<script>hljs.initHighlightingOnLoad()</script>


  <script type="text/javascript" async src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[\[','\]\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});

MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<style>
code.has-jax {
    font: inherit;
    font-size: 100%;
    background: inherit;
    border: inherit;
    color: #515151;
}
</style>






</body>
</html>
